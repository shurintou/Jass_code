//=========================================================================== 
//  
// 三八货大乱斗1.8 
//  
//   Warcraft III map script 
//   Generated by the Warcraft III World Editor 
//   Date: Sat Mar 31 02:20:29 2012 
//   Map Author: 嘿咻猫 
//  
//=========================================================================== 

//*************************************************************************** 
//* 
//*  Global Variables 
//* 
//*************************************************************************** 

globals 
    // User-defined 
    string array udg_YANSE 
    hashtable udg_Hash1 = null 
    unit udg_lsu = null 
    force udg_shouwan = null 
    terraindeformation udg_T = null 
    hashtable udg_Hash2 = null 
    string udg_TS 
    integer udg_N = 0 
    hashtable udg_Hash3 = null 
    unit array udg_PlayerLockToHero 
    force udg_OnlinePlayer = null 
    string array udg_KillWords 
    sound array udg_KillSounds 
    integer array udg_LianXuKill 
    real array udg_ReviveX 
    real array udg_ReviveY 
    multiboard udg_BlackBoard = null 
    integer array udg_PlayerScore 
    integer array udg_KilledTimes 
    multiboarditem udg_lsmb = null 
    group udg_CheckHpGroup = null 
    boolean udg_Test = false 
    integer array udg_Ability1 
    integer array udg_Ability2 
    integer array udg_Ability3 
    integer udg_WinScore = 0 
    real udg_XMAX = 0 
    real udg_YMAX = 0 
    real udg_XMIN = 0 
    real udg_YMIN = 0 
    rect array udg_CreepRect 
    unit array udg_Bag 
    integer array udg_HeroId 
    string array udg_PlayerName 
    weathereffect array udg_weather 
    integer udg_WeatherN = 0 
    hashtable udg_Hash4 = null 
    hashtable udg_Hash5 = null 

    // Generated 
    rect gg_rct______________000 = null 
    rect gg_rct______________001 = null 
    rect gg_rct______________002 = null 
    rect gg_rct______________003 = null 
    rect gg_rct______________004 = null 
    rect gg_rct______________005 = null 
    rect gg_rct______________006 = null 
    rect gg_rct______________007 = null 
    rect gg_rct______________008 = null 
    rect gg_rct______________009 = null 
    rect gg_rct______________010 = null 
    rect gg_rct______________011 = null 
    rect gg_rct______________012 = null 
    rect gg_rct______________013 = null 
    rect gg_rct______________014 = null 
    rect gg_rct______________015 = null 
    rect gg_rct______________016 = null 
    rect gg_rct______________017 = null 
    rect gg_rct______________018 = null 
    rect gg_rct_First_Area = null 
    rect gg_rct_boss = null 
    sound gg_snd_dominating = null 
    sound gg_snd_double_kill = null 
    sound gg_snd_firstblood = null 
    sound gg_snd_godlike = null 
    sound gg_snd_holyshit = null 
    sound gg_snd_killing_spree = null 
    sound gg_snd_megakill = null 
    sound gg_snd_monsterkill = null 
    sound gg_snd_ownage = null 
    sound gg_snd_rampage = null 
    sound gg_snd_triple_kill = null 
    sound gg_snd_ug = null 
    sound gg_snd_ultrakill = null 
    sound gg_snd_unstoppable = null 
    sound gg_snd_whickedsick = null 
    sound gg_snd_BUTCHER = null 
    sound gg_snd_Error = null 
    sound gg_snd_Silence1 = null 
    sound gg_snd_AcolyteMining = null 
    trigger gg_trg_Start = null 
    trigger gg_trg_Creep = null 
    trigger gg_trg_EveryUnitGetHarm = null 
    trigger gg_trg_Beginning = null 
    trigger gg_trg_SureWinScore = null 
    trigger gg_trg_SureAbilityForbidden = null 
    trigger gg_trg_HeroId = null 
    trigger gg_trg_OverRandom = null 
    trigger gg_trg_OverRepick = null 
    trigger gg_trg_CreateBag = null 
    trigger gg_trg_CreateWeather = null 
    trigger gg_trg_Buyhero9 = null 
    trigger gg_trg_Buyhero8 = null 
    trigger gg_trg_Buyhero7 = null 
    trigger gg_trg_Buyhero6 = null 
    trigger gg_trg_Buyhero5 = null 
    trigger gg_trg_Buyhero4 = null 
    trigger gg_trg_Buyhero3 = null 
    trigger gg_trg_Buyhero2 = null 
    trigger gg_trg_Buyhero1 = null 
    trigger gg_trg_Random1 = null 
    trigger gg_trg_repick = null 
    trigger gg_trg_DianJinShou = null 
    trigger gg_trg_Wuqi = null 
    trigger gg_trg_bingyan = null 
    trigger gg_trg_ShnZhuang = null 
    trigger gg_trg_ShnZhuang2 = null 
    trigger gg_trg_ItemOne = null 
    trigger gg_trg_ItemTwo = null 
    trigger gg_trg_ItemThree = null 
    trigger gg_trg_ItemFour = null 
    trigger gg_trg_ItemFive = null 
    trigger gg_trg_ItemSix = null 
    trigger gg_trg_ItemSeven = null 
    trigger gg_trg_ItemEight = null 
    trigger gg_trg_ItemNine = null 
    trigger gg_trg_ItemTen = null 
    trigger gg_trg_CreateItem = null 
    trigger gg_trg_checkhpgroup = null 
    trigger gg_trg_multiborad = null 
    trigger gg_trg_test = null 
    trigger gg_trg_NoCD = null 
    trigger gg_trg_level = null 
    trigger gg_trg_Uplevel = null 
    trigger gg_trg_view = null 
    trigger gg_trg_kill = null 
    trigger gg_trg_wtf = null 
    trigger gg_trg_wtfd = null 
    trigger gg_trg_wtfdown = null 
    trigger gg_trg_AllT = null 
    trigger gg_trg_wolfup = null 
    trigger gg_trg_jiefangqiao = null 
    trigger gg_trg_HorseSong = null 
    trigger gg_trg_Kuaimajiabian = null 
    trigger gg_trg_SpeddAddAttack = null 
    trigger gg_trg_angleup = null 
    trigger gg_trg_piggrass = null 
    trigger gg_trg_HAOZHU = null 
    trigger gg_trg_AroundChuanCi = null 
    trigger gg_trg_AroundChuanCiT = null 
    trigger gg_trg_maoji = null 
    trigger gg_trg_divewater = null 
    trigger gg_trg_liangjifanzhuan = null 
    trigger gg_trg_shouyuliliang = null 
    trigger gg_trg_tigaoshouyuliliang = null 
    trigger gg_trg_HuanXiangFanJi = null 
    trigger gg_trg_Learnfanji = null 
    trigger gg_trg_Taotai = null 
    trigger gg_trg_fanji = null 
    trigger gg_trg_Taunt = null 
    trigger gg_trg_E = null 
    trigger gg_trg_ENew = null 
    trigger gg_trg_ImpleCast = null 
    trigger gg_trg_EarthQuake = null 
    trigger gg_trg_FulanOn = null 
    trigger gg_trg_FulanOff = null 
    trigger gg_trg_FreshMeat = null 
    trigger gg_trg_gouzi = null 
    trigger gg_trg_fulandengji = null 
    trigger gg_trg_xixueguanghuan = null 
    trigger gg_trg_qiyue = null 
    trigger gg_trg_ManaBurn = null 
    trigger gg_trg_AddAttack = null 
    trigger gg_trg_falikuikong = null 
    trigger gg_trg_changelife = null 
    trigger gg_trg_Steal = null 
    trigger gg_trg_StealNew = null 
    trigger gg_trg_Shiye = null 
    trigger gg_trg_GetInvisible = null 
    trigger gg_trg_RushA = null 
    trigger gg_trg_UseRush = null 
    trigger gg_trg_Invulnerable_Cut = null 
    trigger gg_trg_huidaoguoqu = null 
    trigger gg_trg_poyinyiji = null 
    trigger gg_trg_renshu = null 
    trigger gg_trg_renshuup = null 
    trigger gg_trg_NewArrow = null 
    trigger gg_trg_StarFall = null 
    trigger gg_trg_Clap = null 
    trigger gg_trg_yuezhiyanmian = null 
    trigger gg_trg_yanmu = null 
    trigger gg_trg_LearnInvisable = null 
    trigger gg_trg_AttackBack = null 
    trigger gg_trg_BlinkBack = null 
    trigger gg_trg_ThunderStorm = null 
    trigger gg_trg_LearnTS = null 
    trigger gg_trg_AddAttackSpeed = null 
    trigger gg_trg_LearnAddAttackSpeed = null 
    trigger gg_trg_xionglevel = null 
    trigger gg_trg_FireOnUnit = null 
    trigger gg_trg_FireOnCheck = null 
    trigger gg_trg_LearnFireOn = null 
    trigger gg_trg_zhuorezhijian = null 
    trigger gg_trg_BurnOil = null 
    trigger gg_trg_UseBurnOil = null 
    trigger gg_trg_phonix = null 
    trigger gg_trg_magicleash = null 
    trigger gg_trg_yaoshuup = null 
    trigger gg_trg_bianshen = null 
    trigger gg_trg_refreshtank = null 
    trigger gg_trg_waterhole = null 
    trigger gg_trg_rushwater = null 
    trigger gg_trg_DeathFinger = null 
    trigger gg_trg_Yaoshu = null 
    trigger gg_trg_V = null 
    trigger gg_trg_EarthBomb = null 
    trigger gg_trg_LearnLiquidBurn = null 
    trigger gg_trg_LiquidBurn = null 
    trigger gg_trg_LieYanFengBao = null 
    trigger gg_trg_XURUO = null 
    trigger gg_trg_EatBrain = null 
    trigger gg_trg_asdqweqwe = null 
    trigger gg_trg_stopwerqew = null 
    trigger gg_trg_leitingyiji = null 
    trigger gg_trg_ZhouYu = null 
    trigger gg_trg_jieshuzhouyu = null 
    trigger gg_trg_zengwu = null 
    trigger gg_trg_LearnTudou = null 
    trigger gg_trg_learnaddas = null 
    trigger gg_trg_AttackPoison = null 
    trigger gg_trg_OrderPoison = null 
    trigger gg_trg_SpellPoison = null 
    trigger gg_trg_XISHENG = null 
    trigger gg_trg_Stone = null 
    trigger gg_trg_TrueDragon = null 
    trigger gg_trg_BrunGround = null 
    trigger gg_trg_tunshishengji = null 
    trigger gg_trg_SpeedInNight = null 
    trigger gg_trg_DarkTime = null 
    trigger gg_trg_LearnNight = null 
    trigger gg_trg_shangcankongju = null 
    trigger gg_trg_HighFire = null 
    trigger gg_trg_AttackWithFire = null 
    trigger gg_trg_GOGOGO = null 
    trigger gg_trg_GetCloseToGOGO = null 
    trigger gg_trg_HolyAttack = null 
    trigger gg_trg_huoyanzhiren = null 
    trigger gg_trg_AddMoney = null 
    trigger gg_trg_Leveltotwofive = null 
    trigger gg_trg_attacktree = null 
    trigger gg_trg_LessHarm = null 
    trigger gg_trg_kuangbaoliliang = null 
    trigger gg_trg_Kungbaoliliang = null 
    trigger gg_trg_LearnLH = null 
    trigger gg_trg_Fshouxingpifu = null 
    trigger gg_trg_clap = null 
    trigger gg_trg_fensui = null 
    trigger gg_trg_wavechong = null 
    trigger gg_trg_Puke = null 
    trigger gg_trg_devour = null 
    trigger gg_trg_RenyiDanweiBeiZhuang = null 
    trigger gg_trg_UploadedC = null 
    trigger gg_trg_nianyou = null 
    trigger gg_trg_dddd = null 
    trigger gg_trg_Purge = null 
    trigger gg_trg_LearnPurge = null 
    trigger gg_trg_jingxiangbaoji = null 
    trigger gg_trg_cf = null 
    trigger gg_trg_cfon = null 
    trigger gg_trg_HuanXiangLa = null 
    trigger gg_trg_vbegin = null 
    trigger gg_trg_FireRain = null 
    trigger gg_trg_FireDream = null 
    trigger gg_trg_yanmo = null 
    trigger gg_trg_vieee = null 
    trigger gg_trg_JiduKewang = null 
    trigger gg_trg_illcloudy = null 
    trigger gg_trg_HuangWu = null 
    trigger gg_trg_ZheShe = null 
    trigger gg_trg_learnhuangwu = null 
    trigger gg_trg_learndawn = null 
    trigger gg_trg_Summoned = null 
    trigger gg_trg_Dawn = null 
    trigger gg_trg_MoveTo = null 
    trigger gg_trg_EatMoon = null 
    trigger gg_trg_MAoTouYING = null 
    trigger gg_trg_LearnAgi = null 
    trigger gg_trg_CheckHp = null 
    trigger gg_trg_SXLX = null 
    trigger gg_trg_Tear = null 
    trigger gg_trg_xuezhikuangbao = null 
    trigger gg_trg_ClapGo = null 
    trigger gg_trg_GodGoDown = null 
    trigger gg_trg_julihuiwu = null 
    trigger gg_trg_attackevil = null 
    trigger gg_trg_stunbyshixiang = null 
    trigger gg_trg_FireWall = null 
    trigger gg_trg_ghostship = null 
    trigger gg_trg_shuidao = null 
    trigger gg_trg_PanDuanShuiDao = null 
    trigger gg_trg_PanDuanKaiQi = null 
    trigger gg_trg_HolyKill = null 
    trigger gg_trg_fenghuangniao = null 
    trigger gg_trg_CreateWeatherd = null 
    trigger gg_trg_stopsnow = null 
    trigger gg_trg_qixue = null 
    trigger gg_trg_ElectricalBomb = null 
    trigger gg_trg_followwind = null 
    trigger gg_trg_followwindact = null 
    trigger gg_trg_quanlingyujimo = null 
    trigger gg_trg_ElectricSquare = null 
    trigger gg_trg_AngryElec = null 
    trigger gg_trg_shandianlian = null 
    trigger gg_trg_GodHand = null 
    trigger gg_trg_LinkenHudun = null 
    trigger gg_trg_lianhuanshuangdong = null 
    trigger gg_trg_shuangdongliliang = null 
    trigger gg_trg_DarkThrough = null 
    trigger gg_trg_LearnFrezonBall = null 
    trigger gg_trg_Spirit = null 
    trigger gg_trg_StopSpirit = null 
    trigger gg_trg_wudu = null 
    trigger gg_trg_swudu = null 
    trigger gg_trg_blink = null 
    trigger gg_trg_zhuanyi = null 
    trigger gg_trg_jinghua = null 
    trigger gg_trg_fanlaohuantong = null 
    trigger gg_trg_HuiJi = null 
    trigger gg_trg_AttackWithHuiJi = null 
    trigger gg_trg_PanDuanHuiJi = null 
    trigger gg_trg_ChuansongBlink = null 
    trigger gg_trg_ZhunbeiBlink = null 
    trigger gg_trg_YuanLiLiaoKao = null 
    trigger gg_trg_StopLiaoKao = null 
    trigger gg_trg_UpSHUailao = null 
    trigger gg_trg_Tanlan = null 
    trigger gg_trg_BaoFu = null 
    trigger gg_trg_jump = null 
    trigger gg_trg_learnnature = null 
    trigger gg_trg_learnaddstrong = null 
    trigger gg_trg_hunluanC = null 
    trigger gg_trg_zhimingyijiC = null 
    trigger gg_trg_hpxiaoyuling = null 
    trigger gg_trg_hpdayuhundred = null 
    trigger gg_trg_lvlupwithability = null 
    trigger gg_trg_shengqishidead = null 
    trigger gg_trg_shengrevive = null 
    trigger gg_trg_addintel = null 
    trigger gg_trg_addshuxing = null 
    trigger gg_trg_zhufuzhiliao = null 
    trigger gg_trg_shenshengshenpan = null 
    trigger gg_trg_shandianshiye = null 
    trigger gg_trg_arrow = null 
    trigger gg_trg_bingya = null 
    trigger gg_trg_wujindefennu = null 
    trigger gg_trg_shiyongfennu = null 
    trigger gg_trg_wujindetili = null 
    trigger gg_trg_shenglinuhou = null 
    trigger gg_trg_yemanchongzhuang = null 
    trigger gg_trg_huaixuebingliaofa = null 
    trigger gg_trg_sanxiangzhili = null 
    trigger gg_trg_shoudaoshanghaisanxiang = null 
    trigger gg_trg_longlonglong = null 
    trigger gg_trg_AnshaZhunbei = null 
    trigger gg_trg_AnshaJieShu = null 
    trigger gg_trg_chaoqiangstrong = null 
    trigger gg_trg_panduanchaoqiang = null 
    trigger gg_trg_spellchaoqiang = null 
    trigger gg_trg_jinu = null 
    trigger gg_trg_dazhaokeji = null 
    trigger gg_trg_learnrrrrrr = null 
    trigger gg_trg_zhaohuanxiong = null 
    trigger gg_trg_huigui = null 
    trigger gg_trg_hpless = null 
    trigger gg_trg_deadxiong = null 
    trigger gg_trg_zhandouhoujiao = null 
    trigger gg_trg_emochanshen = null 
    trigger gg_trg_lvlupchaodu = null 
    trigger gg_trg_zhushenhuanghun = null 
    trigger gg_trg_CCCkaominjie = null 
    trigger gg_trg_xueCCC = null 
    trigger gg_trg_tongmozhijing = null 
    trigger gg_trg_xuetongmo = null 
    trigger gg_trg_chongneng = null 
    trigger gg_trg_learnluanwu = null 
    trigger gg_trg_wuqiluanwu = null 
    trigger gg_trg_buzhuowuqi = null 
    trigger gg_trg_buzhuomubiaodanwei = null 
    trigger gg_trg_dedaoshengjian = null 
    trigger gg_trg_fengkuangshalu = null 
    trigger gg_trg_yichudanweizu = null 
    trigger gg_trg_siwangsiwang = null 
    trigger gg_trg_attackwithfengkuang = null 
    trigger gg_trg_walkaournd = null 
    trigger gg_trg_Zhuanyishanghai = null 
    trigger gg_trg_jiagongsiling = null 
    trigger gg_trg_Deadzhaohuan = null 
    trigger gg_trg_learnsiling = null 
    trigger gg_trg_shufuzhijian = null 
    trigger gg_trg_qianglijianyu = null 
    trigger gg_trg_zhunbeiqiangli = null 
    trigger gg_trg_jueduifangyu = null 
    trigger gg_trg_zhunbeihuichun = null 
    trigger gg_trg_huichun = null 
    trigger gg_trg_zengjiamofazuidazhi = null 
    trigger gg_trg_chaofuhe = null 
    trigger gg_trg_mieshi = null 
    trigger gg_trg_songge = null 
    trigger gg_trg_zange = null 
    trigger gg_trg_sigedead = null 
    trigger gg_trg_xisheng = null 
    trigger gg_trg_shoushanghaijianshao = null 
    trigger gg_trg_novawwww = null 
    trigger gg_trg_lingdudongjie = null 
    trigger gg_trg_GetItem = null 
    trigger gg_trg_UseItem = null 
    trigger gg_trg_attacked = null 
    trigger gg_trg_AttackOther = null 
    trigger gg_trg_DropItem = null 
    trigger gg_trg_GetHarm = null 
    trigger gg_trg_HeroDead = null 
    trigger gg_trg_LearnAbility = null 
    trigger gg_trg_Hplowto = null 
    trigger gg_trg_BuyToRevive = null 
    trigger gg_trg_asd = null 
    trigger gg_trg_Ability = null 
    trigger gg_trg_Ability2 = null 
    trigger gg_trg_Ability3 = null 
    trigger gg_trg_Ability4 = null 
    trigger gg_trg_Ability5 = null 
    trigger gg_trg_Ability6 = null 
    trigger gg_trg_ChaYan = null 
    trigger gg_trg_ChaYanNew = null 
    trigger gg_trg_ChooseHero = null 
    trigger gg_trg_DropSB = null 
    trigger gg_trg_MoveHero = null 
    trigger gg_trg_LightAcher = null 
    trigger gg_trg_TrueEmpty = null 
    trigger gg_trg_Drought = null 
    trigger gg_trg_GroundSF = null 
    trigger gg_trg_NewGroundSF = null 
    trigger gg_trg_DarkShadowWave = null 
    trigger gg_trg_DeadRush = null 
    trigger gg_trg_SkyFire = null 
    trigger gg_trg_Moonw = null 
    trigger gg_trg_TerribleHowl = null 
    trigger gg_trg_HolyLight = null 
    trigger gg_trg_QuakeWave = null 
    trigger gg_trg_RushWave = null 
    trigger gg_trg_ProtectAngel = null 
    trigger gg_trg_GhostWard = null 
    trigger gg_trg_Flare = null 
    trigger gg_trg_AcidCloud = null 
    trigger gg_trg_qiangxizhichu = null 
    trigger gg_trg_CiBao = null 
    trigger gg_trg_DaoDan = null 
    trigger gg_trg_DarkQiYue = null 
    trigger gg_trg_Xbiaoji = null 
    trigger gg_trg_ChaKeLa = null 
    trigger gg_trg_ReturntoX = null 
    trigger gg_trg_Shadow = null 
    trigger gg_trg_BlinkAttack = null 
    trigger gg_trg_FastRun = null 
    trigger gg_trg_LightningBolt = null 
    trigger gg_trg_Razor = null 
    trigger gg_trg_BadSleep = null 
    trigger gg_trg_HonestChect = null 
    trigger gg_trg_DoubleSword = null 
    trigger gg_trg_Web = null 
    trigger gg_trg_FrozenFeng = null 
    trigger gg_trg_PlantTree = null 
    trigger gg_trg_bozang2 = null 
    trigger gg_trg_bozangharm = null 
    trigger gg_trg_huoxueshu = null 
    trigger gg_trg_LiZiWaiKe = null 
    trigger gg_trg_SiLie = null 
    trigger gg_trg_Qiqupifu = null 
    trigger gg_trg_DirtyPower = null 
    trigger gg_trg_HolyMove = null 
    trigger gg_trg_ReduceWave = null 
    trigger gg_trg_JingQi = null 
    trigger gg_trg_BingLie = null 
    trigger gg_trg_PoisonAttack = null 
    trigger gg_trg_ShengYan = null 
    trigger gg_trg_SeaShiled = null 
    trigger gg_trg_DrinkBoxing = null 
    trigger gg_trg_EveryUnitAttacked = null 
    trigger gg_trg_QuxiaoYang = null 
    trigger gg_trg_chenmoshushi = null 
    trigger gg_trg_EveryUnitDead = null 
    trigger gg_trg_chuquyu = null 
    trigger gg_trg_LeaveGame = null 
    trigger gg_trg_TypeOrder = null 
    unit gg_unit_nmrc_0104 = null 
    unit gg_unit_ngad_0133 = null 
    unit gg_unit_ntav_0004 = null 
    unit gg_unit_utom_0132 = null 
    unit gg_unit_Hamg_0130 = null 
    unit gg_unit_nmrk_0102 = null 
    unit gg_unit_nmra_0144 = null 
    unit gg_unit_nmr9_0139 = null 
    unit gg_unit_nmrb_0145 = null 
    unit gg_unit_ngme_0005 = null 
    unit gg_unit_eden_0131 = null 
    unit gg_unit_ovln_0129 = null 
    unit gg_unit_hvlt_0020 = null 
    unit gg_unit_nmr0_0138 = null 
    unit gg_unit_nmrd_0136 = null 
    unit gg_unit_nmr4_0135 = null 
    unit gg_unit_nmrf_0134 = null 
    unit gg_unit_nmer_0003 = null 
    unit gg_unit_nmr2_0021 = null 
    unit gg_unit_nmr3_0090 = null 
    unit gg_unit_nmr5_0105 = null 
    unit gg_unit_nmr6_0106 = null 
    unit gg_unit_nmr7_0107 = null 
    unit gg_unit_nwlt_0108 = null 
    unit gg_unit_Ewrd_0109 = null 
    unit gg_unit_nmr8_0110 = null 
    unit gg_unit_nmre_0111 = null 
    unit gg_unit_nshp_0112 = null 
    unit gg_unit_harm_0113 = null 
    unit gg_unit_hars_0137 = null 
    unit gg_unit_edob_0140 = null 
endglobals 

function InitGlobals takes nothing returns nothing 
    local integer i = 0 
    set i = 0 
    loop 
        exitwhen(i > 1) 
        set udg_YANSE[i] = "" 
        set i = i + 1 
    endloop 

    set udg_shouwan = CreateForce() 
    set udg_TS = "" 
    set udg_N = 0 
    set udg_OnlinePlayer = CreateForce() 
    set i = 0 
    loop 
        exitwhen(i > 12) 
        set udg_KillWords[i] = "" 
        set i = i + 1 
    endloop 

    set i = 0 
    loop 
        exitwhen(i > 12) 
        set udg_LianXuKill[i] = 0 
        set i = i + 1 
    endloop 

    set i = 0 
    loop 
        exitwhen(i > 12) 
        set udg_ReviveX[i] = 0 
        set i = i + 1 
    endloop 

    set i = 0 
    loop 
        exitwhen(i > 12) 
        set udg_ReviveY[i] = 0 
        set i = i + 1 
    endloop 

    set i = 0 
    loop 
        exitwhen(i > 12) 
        set udg_PlayerScore[i] = 0 
        set i = i + 1 
    endloop 

    set i = 0 
    loop 
        exitwhen(i > 12) 
        set udg_KilledTimes[i] = 0 
        set i = i + 1 
    endloop 

    set udg_CheckHpGroup = CreateGroup() 
    set udg_Test = false 
    set i = 0 
    loop 
        exitwhen(i > 12) 
        set udg_Ability1[i] = 0 
        set i = i + 1 
    endloop 

    set i = 0 
    loop 
        exitwhen(i > 12) 
        set udg_Ability2[i] = 0 
        set i = i + 1 
    endloop 

    set i = 0 
    loop 
        exitwhen(i > 12) 
        set udg_Ability3[i] = 0 
        set i = i + 1 
    endloop 

    set udg_WinScore = 0 
    set udg_XMAX = 0 
    set udg_YMAX = 0 
    set udg_XMIN = 0 
    set udg_YMIN = 0 
    set i = 0 
    loop 
        exitwhen(i > 1000) 
        set udg_HeroId[i] = 0 
        set i = i + 1 
    endloop 

    set i = 0 
    loop 
        exitwhen(i > 12) 
        set udg_PlayerName[i] = "" 
        set i = i + 1 
    endloop 

    set udg_WeatherN = 0 
endfunction 

//*************************************************************************** 
//* 
//*  Sounds 
//* 
//*************************************************************************** 

function InitSounds takes nothing returns nothing 
    set gg_snd_dominating = CreateSound("war3mapImported\\dominating.mp3", false, false, false, 10, 10, "") 
    call SetSoundDuration(gg_snd_dominating, 1802) 
    call SetSoundChannel(gg_snd_dominating, 0) 
    call SetSoundVolume(gg_snd_dominating, 127) 
    call SetSoundPitch(gg_snd_dominating, 1.0) 
    set gg_snd_double_kill = CreateSound("war3mapImported\\double_kill.mp3", false, false, false, 10, 10, "") 
    call SetSoundDuration(gg_snd_double_kill, 2012) 
    call SetSoundChannel(gg_snd_double_kill, 0) 
    call SetSoundVolume(gg_snd_double_kill, 127) 
    call SetSoundPitch(gg_snd_double_kill, 1.0) 
    set gg_snd_firstblood = CreateSound("war3mapImported\\firstblood.mp3", false, false, false, 10, 10, "") 
    call SetSoundDuration(gg_snd_firstblood, 1567) 
    call SetSoundChannel(gg_snd_firstblood, 0) 
    call SetSoundVolume(gg_snd_firstblood, 127) 
    call SetSoundPitch(gg_snd_firstblood, 1.0) 
    set gg_snd_godlike = CreateSound("war3mapImported\\godlike.mp3", false, false, false, 10, 10, "") 
    call SetSoundDuration(gg_snd_godlike, 1828) 
    call SetSoundChannel(gg_snd_godlike, 0) 
    call SetSoundVolume(gg_snd_godlike, 127) 
    call SetSoundPitch(gg_snd_godlike, 1.0) 
    set gg_snd_holyshit = CreateSound("war3mapImported\\holyshit.mp3", false, false, false, 10, 10, "") 
    call SetSoundDuration(gg_snd_holyshit, 2325) 
    call SetSoundChannel(gg_snd_holyshit, 0) 
    call SetSoundVolume(gg_snd_holyshit, 127) 
    call SetSoundPitch(gg_snd_holyshit, 1.0) 
    set gg_snd_killing_spree = CreateSound("war3mapImported\\killing_spree.mp3", false, false, false, 10, 10, "") 
    call SetSoundDuration(gg_snd_killing_spree, 2377) 
    call SetSoundChannel(gg_snd_killing_spree, 0) 
    call SetSoundVolume(gg_snd_killing_spree, 127) 
    call SetSoundPitch(gg_snd_killing_spree, 1.0) 
    set gg_snd_megakill = CreateSound("war3mapImported\\megakill.mp3", false, false, false, 10, 10, "") 
    call SetSoundDuration(gg_snd_megakill, 2612) 
    call SetSoundChannel(gg_snd_megakill, 0) 
    call SetSoundVolume(gg_snd_megakill, 127) 
    call SetSoundPitch(gg_snd_megakill, 1.0) 
    set gg_snd_monsterkill = CreateSound("war3mapImported\\monsterkill.mp3", false, false, false, 10, 10, "") 
    call SetSoundDuration(gg_snd_monsterkill, 3344) 
    call SetSoundChannel(gg_snd_monsterkill, 0) 
    call SetSoundVolume(gg_snd_monsterkill, 127) 
    call SetSoundPitch(gg_snd_monsterkill, 1.0) 
    set gg_snd_ownage = CreateSound("war3mapImported\\ownage.mp3", false, false, false, 10, 10, "") 
    call SetSoundDuration(gg_snd_ownage, 2586) 
    call SetSoundChannel(gg_snd_ownage, 0) 
    call SetSoundVolume(gg_snd_ownage, 127) 
    call SetSoundPitch(gg_snd_ownage, 1.0) 
    set gg_snd_rampage = CreateSound("war3mapImported\\rampage.mp3", false, false, false, 10, 10, "") 
    call SetSoundDuration(gg_snd_rampage, 1878) 
    call SetSoundChannel(gg_snd_rampage, 0) 
    call SetSoundVolume(gg_snd_rampage, 127) 
    call SetSoundPitch(gg_snd_rampage, 1.0) 
    set gg_snd_triple_kill = CreateSound("war3mapImported\\triple_kill.mp3", false, false, false, 10, 10, "") 
    call SetSoundDuration(gg_snd_triple_kill, 1907) 
    call SetSoundChannel(gg_snd_triple_kill, 0) 
    call SetSoundVolume(gg_snd_triple_kill, 127) 
    call SetSoundPitch(gg_snd_triple_kill, 1.0) 
    set gg_snd_ug = CreateSound("war3mapImported\\ug.mp3", false, false, false, 10, 10, "") 
    call SetSoundDuration(gg_snd_ug, 2759) 
    call SetSoundChannel(gg_snd_ug, 0) 
    call SetSoundVolume(gg_snd_ug, 127) 
    call SetSoundPitch(gg_snd_ug, 1.0) 
    set gg_snd_ultrakill = CreateSound("war3mapImported\\ultrakill.mp3", false, false, false, 10, 10, "") 
    call SetSoundDuration(gg_snd_ultrakill, 2490) 
    call SetSoundChannel(gg_snd_ultrakill, 0) 
    call SetSoundVolume(gg_snd_ultrakill, 127) 
    call SetSoundPitch(gg_snd_ultrakill, 1.0) 
    set gg_snd_unstoppable = CreateSound("war3mapImported\\unstoppable.mp3", false, false, false, 10, 10, "DefaultEAXON") 
    call SetSoundDuration(gg_snd_unstoppable, 2038) 
    call SetSoundChannel(gg_snd_unstoppable, 0) 
    call SetSoundVolume(gg_snd_unstoppable, 127) 
    call SetSoundPitch(gg_snd_unstoppable, 1.0) 
    set gg_snd_whickedsick = CreateSound("war3mapImported\\whickedsick.mp3", false, false, false, 10, 10, "") 
    call SetSoundDuration(gg_snd_whickedsick, 2612) 
    call SetSoundChannel(gg_snd_whickedsick, 0) 
    call SetSoundVolume(gg_snd_whickedsick, 127) 
    call SetSoundPitch(gg_snd_whickedsick, 1.0) 
    set gg_snd_BUTCHER = CreateSound("war3mapImported\\BUTCHER.WAV", false, false, false, 10, 10, "DefaultEAXON") 
    call SetSoundDuration(gg_snd_BUTCHER, 2247) 
    call SetSoundChannel(gg_snd_BUTCHER, 0) 
    call SetSoundVolume(gg_snd_BUTCHER, 127) 
    call SetSoundPitch(gg_snd_BUTCHER, 1.0) 
    set gg_snd_Error = CreateSound("Sound\\Interface\\Error.wav", false, false, false, 10, 10, "DefaultEAXON") 
    call SetSoundParamsFromLabel(gg_snd_Error, "InterfaceError") 
    call SetSoundDuration(gg_snd_Error, 614) 
    set gg_snd_Silence1 = CreateSound("Abilities\\Spells\\Other\\Silence\\Silence1.wav", false, true, true, 10, 10, "SpellsEAX") 
    call SetSoundParamsFromLabel(gg_snd_Silence1, "Silence") 
    call SetSoundDuration(gg_snd_Silence1, 2276) 
    call SetSoundDistanceCutoff(gg_snd_Silence1, 100000.0) 
    set gg_snd_AcolyteMining = CreateSound("Abilities\\Spells\\Undead\\UndeadMine\\AcolyteMining.wav", true, true, true, 10, 10, "SpellsEAX") 
    call SetSoundParamsFromLabel(gg_snd_AcolyteMining, "AcolyteMining") 
    call SetSoundDuration(gg_snd_AcolyteMining, 4233) 
    call SetSoundChannel(gg_snd_AcolyteMining, 0) 
    call SetSoundDistances(gg_snd_AcolyteMining, 600.0, 10000.0) 
    call SetSoundDistanceCutoff(gg_snd_AcolyteMining, 100000.0) 
endfunction 

//*************************************************************************** 
//* 
//*  Unit Creation 
//* 
//*************************************************************************** 

//=========================================================================== 
function CreateUnitsForPlayer0 takes nothing returns nothing 
    local player p = Player(0) 
    local unit u 
    local integer unitID 
    local trigger t 
    local real life 

    set u = CreateUnit(p, 'e000', -266.0, -623.2, 292.476) 
endfunction 

//=========================================================================== 
function CreateUnitsForPlayer1 takes nothing returns nothing 
    local player p = Player(1) 
    local unit u 
    local integer unitID 
    local trigger t 
    local real life 

    set u = CreateUnit(p, 'e000', -281.0, -666.1, 291.333) 
endfunction 

//=========================================================================== 
function CreateUnitsForPlayer2 takes nothing returns nothing 
    local player p = Player(2) 
    local unit u 
    local integer unitID 
    local trigger t 
    local real life 

    set u = CreateUnit(p, 'e000', -279.5, -658.9, 113.218) 
endfunction 

//=========================================================================== 
function CreateUnitsForPlayer3 takes nothing returns nothing 
    local player p = Player(3) 
    local unit u 
    local integer unitID 
    local trigger t 
    local real life 

    set u = CreateUnit(p, 'e000', -241.0, -670.8, 204.407) 
endfunction 

//=========================================================================== 
function CreateUnitsForPlayer4 takes nothing returns nothing 
    local player p = Player(4) 
    local unit u 
    local integer unitID 
    local trigger t 
    local real life 

    set u = CreateUnit(p, 'e000', -271.4, -660.8, 166.283) 
endfunction 

//=========================================================================== 
function CreateUnitsForPlayer5 takes nothing returns nothing 
    local player p = Player(5) 
    local unit u 
    local integer unitID 
    local trigger t 
    local real life 

    set u = CreateUnit(p, 'e000', -245.7, -621.4, 51.143) 
endfunction 

//=========================================================================== 
function CreateUnitsForPlayer6 takes nothing returns nothing 
    local player p = Player(6) 
    local unit u 
    local integer unitID 
    local trigger t 
    local real life 

    set u = CreateUnit(p, 'e000', -258.8, -615.5, 106.494) 
endfunction 

//=========================================================================== 
function CreateUnitsForPlayer7 takes nothing returns nothing 
    local player p = Player(7) 
    local unit u 
    local integer unitID 
    local trigger t 
    local real life 

    set u = CreateUnit(p, 'e000', -247.7, -659.6, 5.342) 
endfunction 

//=========================================================================== 
function CreateUnitsForPlayer8 takes nothing returns nothing 
    local player p = Player(8) 
    local unit u 
    local integer unitID 
    local trigger t 
    local real life 

    set u = CreateUnit(p, 'e000', -248.1, -612.4, 62.514) 
endfunction 

//=========================================================================== 
function CreateUnitsForPlayer9 takes nothing returns nothing 
    local player p = Player(9) 
    local unit u 
    local integer unitID 
    local trigger t 
    local real life 

    set u = CreateUnit(p, 'e000', -237.0, -614.0, 328.161) 
endfunction 

//=========================================================================== 
function CreateUnitsForPlayer10 takes nothing returns nothing 
    local player p = Player(10) 
    local unit u 
    local integer unitID 
    local trigger t 
    local real life 

    set u = CreateUnit(p, 'e000', -278.5, -615.0, 198.540) 
endfunction 

//=========================================================================== 
function CreateUnitsForPlayer11 takes nothing returns nothing 
    local player p = Player(11) 
    local unit u 
    local integer unitID 
    local trigger t 
    local real life 

    set u = CreateUnit(p, 'e000', -247.1, -636.3, 279.149) 
endfunction 

//=========================================================================== 
function CreateNeutralHostile takes nothing returns nothing 
    local player p = Player(PLAYER_NEUTRAL_AGGRESSIVE) 
    local unit u 
    local integer unitID 
    local trigger t 
    local real life 

    set u = CreateUnit(p, 'nomg', -250.2, 3193.5, 270.000) 
    call SetUnitState(u, UNIT_STATE_MANA, 0) 
    set u = CreateUnit(p, 'ngnb', -5542.7, 660.0, 0.000) 
    set u = CreateUnit(p, 'ngna', -5656.4, 594.6, 0.000) 
    set u = CreateUnit(p, 'ngna', -5661.9, 783.0, 0.000) 
    set u = CreateUnit(p, 'nogr', 2893.2, 4373.8, 279.460) 
    set u = CreateUnit(p, 'nftt', 2997.8, 4517.0, 261.830) 
    set u = CreateUnit(p, 'nftt', 2711.0, 4515.7, 298.838) 
    set u = CreateUnit(p, 'nomg', -4608.6, -2948.8, 33.710) 
    call SetUnitState(u, UNIT_STATE_MANA, 0) 
    set u = CreateUnit(p, 'nftt', -4838.0, -2811.8, 51.754) 
    set u = CreateUnit(p, 'nftt', -4514.8, -3155.1, 49.120) 
    set u = CreateUnit(p, 'nomg', 4109.6, -2948.0, 135.000) 
    call SetUnitState(u, UNIT_STATE_MANA, 0) 
    set u = CreateUnit(p, 'nftt', 4274.8, -2860.1, 113.492) 
    set u = CreateUnit(p, 'nmrm', -3126.1, -3591.8, 270.000) 
    set u = CreateUnit(p, 'nmrl', -3128.2, -3751.3, 270.000) 
    set u = CreateUnit(p, 'nmrr', -2945.0, -3657.8, 270.000) 
    set u = CreateUnit(p, 'nmrr', -3322.2, -3663.5, 270.000) 
    set u = CreateUnit(p, 'nmrm', 2922.9, -3781.8, 180.000) 
    set u = CreateUnit(p, 'nmrl', 2731.2, -3793.9, 180.000) 
    set u = CreateUnit(p, 'nmrr', 2821.0, -3974.1, 180.000) 
    set u = CreateUnit(p, 'nmrr', 2807.8, -3615.8, 180.000) 
    set u = CreateUnit(p, 'nkot', -6349.4, -1039.5, 35.247) 
    set u = CreateUnit(p, 'nftb', -464.1, -3119.1, 90.000) 
    set u = CreateUnit(p, 'nogm', -235.6, -3114.5, 90.000) 
    set u = CreateUnit(p, 'nftb', -33.4, -3077.8, 90.000) 
    set u = CreateUnit(p, 'ngst', -5344.1, 2744.9, 336.906) 
    call SetUnitState(u, UNIT_STATE_MANA, 0) 
    set u = CreateUnit(p, 'nftt', 4035.7, -3124.1, 126.898) 
    set u = CreateUnit(p, 'nmrr', -3699.7, -786.0, 340.876) 
    set u = CreateUnit(p, 'nmrr', 5953.2, -4770.8, 197.081) 
    set u = CreateUnit(p, 'ntrg', 5966.3, -4551.9, 217.520) 
    set u = CreateUnit(p, 'nmrm', 5790.9, -4694.7, 216.509) 
    set u = CreateUnit(p, 'ngnb', 5162.5, 850.9, 180.000) 
    set u = CreateUnit(p, 'ngna', 5175.0, 690.2, 180.000) 
    set u = CreateUnit(p, 'ngna', 5256.9, 899.8, 180.000) 
    set u = CreateUnit(p, 'nmrm', -3614.7, -955.8, 90.000) 
    set u = CreateUnit(p, 'nmrl', -3476.8, -903.1, 90.000) 
    set u = CreateUnit(p, 'nmrr', -3258.0, -767.9, 90.000) 
    set u = CreateUnit(p, 'nmrr', 6185.2, -4632.7, 202.032) 
    set u = CreateUnit(p, 'nmrm', -3313.1, -927.1, 90.000) 
    set u = CreateUnit(p, 'nmrl', -3557.3, -803.7, 90.000) 
    set u = CreateUnit(p, 'nmrl', -3386.0, -787.1, 90.000) 
    set u = CreateUnit(p, 'nmrm', 2617.2, -599.6, 347.560) 
    set u = CreateUnit(p, 'nmrl', 2762.8, -657.0, 347.972) 
    set u = CreateUnit(p, 'nmrr', 3055.4, -823.8, 2.913) 
    set u = CreateUnit(p, 'nmrr', 2740.4, -499.2, 340.876) 
    set u = CreateUnit(p, 'nmrm', 2976.7, -920.3, 356.190) 
    set u = CreateUnit(p, 'nmrl', 2719.9, -789.7, 351.925) 
    set u = CreateUnit(p, 'nmrl', 2897.0, -784.4, 356.073) 
    set u = CreateUnit(p, 'ngst', -5063.3, 3127.2, 310.618) 
    call SetUnitState(u, UNIT_STATE_MANA, 0) 
    set u = CreateUnit(p, 'nwzg', -6639.0, -773.6, 8.960) 
    call SetUnitState(u, UNIT_STATE_MANA, 0) 
    set u = CreateUnit(p, 'nmrm', 6172.8, -4455.8, 214.030) 
    set u = CreateUnit(p, 'nkot', -6216.4, -568.0, 350.786) 
    set u = CreateUnit(p, 'nggr', -5505.9, 3289.5, 357.379) 
    call SetUnitState(u, UNIT_STATE_MANA, 0) 
    set u = CreateUnit(p, 'ngst', 4848.6, 2607.2, 215.440) 
    call SetUnitState(u, UNIT_STATE_MANA, 0) 
    set u = CreateUnit(p, 'nkog', 5927.0, -1018.7, 170.220) 
    set u = CreateUnit(p, 'nmrr', -6424.8, -3769.3, 322.405) 
    set u = CreateUnit(p, 'nwzg', 6147.3, -773.9, 188.960) 
    call SetUnitState(u, UNIT_STATE_MANA, 0) 
    set u = CreateUnit(p, 'ngst', 4584.1, 3062.9, 250.490) 
    call SetUnitState(u, UNIT_STATE_MANA, 0) 
    set u = CreateUnit(p, 'ntrg', -6451.2, -3479.2, 311.370) 
    set u = CreateUnit(p, 'nmrm', -6619.5, -3620.7, 333.420) 
    set u = CreateUnit(p, 'nmrr', -6212.7, -3486.3, 297.471) 
    set u = CreateUnit(p, 'nmrm', -6333.3, -3317.9, 333.420) 
    set u = CreateUnit(p, 'nftt', -514.6, 3033.7, 270.000) 
    set u = CreateUnit(p, 'nftt', 5.4, 3038.1, 270.000) 
    set u = CreateUnit(p, 'nogr', 14.4, 2812.4, 270.000) 
    set u = CreateUnit(p, 'nogr', -511.8, 2810.7, 270.000) 
    set u = CreateUnit(p, 'nkot', 5724.8, -979.5, 170.790) 
    set u = CreateUnit(p, 'nkot', 5857.8, -508.0, 215.247) 
    set u = CreateUnit(p, 'nkog', -6418.7, -528.7, 350.222) 
    set u = CreateUnit(p, 'nggr', 4929.6, 3164.3, 228.530) 
    call SetUnitState(u, UNIT_STATE_MANA, 0) 
    set u = CreateUnit(p, 'nftt', -3489.6, 4500.6, 298.838) 
    set u = CreateUnit(p, 'nftt', -3202.8, 4501.9, 261.826) 
    set u = CreateUnit(p, 'nogr', -3307.4, 4358.7, 279.456) 
    set gg_unit_nwlt_0108 = CreateUnit(p, 'nwlt', 402.5, 3206.6, 300.760) 
endfunction 

//=========================================================================== 
function CreateNeutralPassiveBuildings takes nothing returns nothing 
    local player p = Player(PLAYER_NEUTRAL_PASSIVE) 
    local unit u 
    local integer unitID 
    local trigger t 
    local real life 

    set gg_unit_nmer_0003 = CreateUnit(p, 'nmer', -7360.0, 4928.0, 270.000) 
    call SetUnitColor(gg_unit_nmer_0003, ConvertPlayerColor(0)) 
    set gg_unit_ntav_0004 = CreateUnit(p, 'ntav', -384.0, -768.0, 270.000) 
    call SetUnitColor(gg_unit_ntav_0004, ConvertPlayerColor(0)) 
    set gg_unit_ngme_0005 = CreateUnit(p, 'ngme', 7146.3, -5598.5, 57.020) 
    set u = CreateUnit(p, 'nmh1', -3296.0, 4640.0, 270.000) 
    set gg_unit_hvlt_0020 = CreateUnit(p, 'hvlt', -750.6, -432.2, 270.000) 
    set gg_unit_nmr2_0021 = CreateUnit(p, 'nmr2', -7232.0, 4928.0, 270.000) 
    call SetUnitColor(gg_unit_nmr2_0021, ConvertPlayerColor(1)) 
    set u = CreateUnit(p, 'nmh1', 2848.0, 4640.0, 270.000) 
    set u = CreateUnit(p, 'nmh1', 2656.0, -352.0, 270.000) 
    set u = CreateUnit(p, 'nmh1', -3872.0, -736.0, 270.000) 
    set u = CreateUnit(p, 'nmh1', -3360.0, -1056.0, 270.000) 
    set u = CreateUnit(p, 'nmh0', -6816.0, -3424.0, 270.000) 
    set u = CreateUnit(p, 'nmh1', 6112.0, -4320.0, 270.000) 
    set u = CreateUnit(p, 'nmh1', 2848.0, -928.0, 270.000) 
    set u = CreateUnit(p, 'nmh0', 5728.0, -4448.0, 270.000) 
    set u = CreateUnit(p, 'nmh1', -6624.0, -3168.0, 270.000) 
    set gg_unit_nmr3_0090 = CreateUnit(p, 'nmr3', -7104.0, 4928.0, 270.000) 
    call SetUnitColor(gg_unit_nmr3_0090, ConvertPlayerColor(6)) 
    set gg_unit_nmrk_0102 = CreateUnit(p, 'nmrk', -256.0, -768.0, 270.000) 
    call SetUnitColor(gg_unit_nmrk_0102, ConvertPlayerColor(6)) 
    set gg_unit_nmrc_0104 = CreateUnit(p, 'nmrc', -128.0, -768.0, 270.000) 
    call SetUnitColor(gg_unit_nmrc_0104, ConvertPlayerColor(1)) 
    set gg_unit_nmr5_0105 = CreateUnit(p, 'nmr5', -7360.0, 4736.0, 270.000) 
    call SetUnitColor(gg_unit_nmr5_0105, ConvertPlayerColor(7)) 
    set gg_unit_nmr6_0106 = CreateUnit(p, 'nmr6', -7232.0, 4736.0, 270.000) 
    call SetUnitColor(gg_unit_nmr6_0106, ConvertPlayerColor(9)) 
    set gg_unit_nmr7_0107 = CreateUnit(p, 'nmr7', -7104.0, 4736.0, 270.000) 
    call SetUnitColor(gg_unit_nmr7_0107, ConvertPlayerColor(10)) 
    set gg_unit_nmr8_0110 = CreateUnit(p, 'nmr8', -384.0, -512.0, 270.000) 
    call SetUnitColor(gg_unit_nmr8_0110, ConvertPlayerColor(3)) 
    set gg_unit_nmre_0111 = CreateUnit(p, 'nmre', -256.0, -512.0, 270.000) 
    call SetUnitColor(gg_unit_nmre_0111, ConvertPlayerColor(2)) 
    set gg_unit_nshp_0112 = CreateUnit(p, 'nshp', -128.0, -512.0, 270.000) 
    call SetUnitColor(gg_unit_nshp_0112, ConvertPlayerColor(9)) 
    set gg_unit_harm_0113 = CreateUnit(p, 'harm', 7232.0, -5440.0, 270.000) 
    set gg_unit_ovln_0129 = CreateUnit(p, 'ovln', 187.0, -445.9, 270.000) 
    set gg_unit_eden_0131 = CreateUnit(p, 'eden', -739.2, -759.7, 270.000) 
    set gg_unit_utom_0132 = CreateUnit(p, 'utom', 169.5, -789.6, 270.000) 
    set gg_unit_ngad_0133 = CreateUnit(p, 'ngad', 7334.1, -5604.3, 270.000) 
    set gg_unit_nmrf_0134 = CreateUnit(p, 'nmrf', 7296.0, -5248.0, 270.000) 
    call SetUnitColor(gg_unit_nmrf_0134, ConvertPlayerColor(3)) 
    set gg_unit_nmr4_0135 = CreateUnit(p, 'nmr4', 7040.0, -5312.0, 270.000) 
    call SetUnitColor(gg_unit_nmr4_0135, ConvertPlayerColor(11)) 
    set gg_unit_nmrd_0136 = CreateUnit(p, 'nmrd', 172.4, -618.2, 242.180) 
    call SetUnitColor(gg_unit_nmrd_0136, ConvertPlayerColor(9)) 
    set gg_unit_hars_0137 = CreateUnit(p, 'hars', -7104.0, -4288.0, 270.000) 
    set gg_unit_nmr0_0138 = CreateUnit(p, 'nmr0', -730.2, -619.5, 20.810) 
    call SetUnitColor(gg_unit_nmr0_0138, ConvertPlayerColor(5)) 
    set gg_unit_nmr9_0139 = CreateUnit(p, 'nmr9', -384.0, -640.0, 270.000) 
    call SetUnitColor(gg_unit_nmr9_0139, ConvertPlayerColor(7)) 
    set gg_unit_edob_0140 = CreateUnit(p, 'edob', -6784.0, -4224.0, 270.000) 
    set gg_unit_nmra_0144 = CreateUnit(p, 'nmra', -256.0, -640.0, 270.000) 
    call SetUnitColor(gg_unit_nmra_0144, ConvertPlayerColor(10)) 
    set gg_unit_nmrb_0145 = CreateUnit(p, 'nmrb', -128.0, -640.0, 270.000) 
    call SetUnitColor(gg_unit_nmrb_0145, ConvertPlayerColor(8)) 
endfunction 

//=========================================================================== 
function CreateNeutralPassive takes nothing returns nothing 
    local player p = Player(PLAYER_NEUTRAL_PASSIVE) 
    local unit u 
    local integer unitID 
    local trigger t 
    local real life 

    set u = CreateUnit(p, 'npig', 827.4, -2742.0, 247.112) 
    set u = CreateUnit(p, 'npig', -1486.1, 231.8, 161.306) 
    set u = CreateUnit(p, 'nrac', -4276.5, -2479.9, 25.775) 
    set u = CreateUnit(p, 'nrac', 3336.5, -2964.9, 317.954) 
    set u = CreateUnit(p, 'nshe', -3372.9, 2002.9, 263.394) 
    set u = CreateUnit(p, 'nshe', 3594.6, 1095.9, 167.382) 
    set gg_unit_Ewrd_0109 = CreateUnit(p, 'Ewrd', 1786.8, -4335.1, 297.110) 
    call SetHeroLevel(gg_unit_Ewrd_0109, 25, false) 
    call SelectHeroSkill(gg_unit_Ewrd_0109, 'AEev') 
    call SelectHeroSkill(gg_unit_Ewrd_0109, 'AEev') 
    call SelectHeroSkill(gg_unit_Ewrd_0109, 'AEev') 
    call SelectHeroSkill(gg_unit_Ewrd_0109, 'AEev') 
    call SelectHeroSkill(gg_unit_Ewrd_0109, 'Aamk') 
    call SelectHeroSkill(gg_unit_Ewrd_0109, 'Aamk') 
    call SelectHeroSkill(gg_unit_Ewrd_0109, 'Aamk') 
    call SelectHeroSkill(gg_unit_Ewrd_0109, 'Aamk') 
    call SelectHeroSkill(gg_unit_Ewrd_0109, 'Aamk') 
    call SelectHeroSkill(gg_unit_Ewrd_0109, 'Aamk') 
    call SelectHeroSkill(gg_unit_Ewrd_0109, 'Aamk') 
    call SelectHeroSkill(gg_unit_Ewrd_0109, 'Aamk') 
    call SelectHeroSkill(gg_unit_Ewrd_0109, 'Aamk') 
    call SelectHeroSkill(gg_unit_Ewrd_0109, 'Aamk') 
    call SelectHeroSkill(gg_unit_Ewrd_0109, 'Aamk') 
    call SelectHeroSkill(gg_unit_Ewrd_0109, 'Aamk') 
    call SelectHeroSkill(gg_unit_Ewrd_0109, 'Aamk') 
    call SelectHeroSkill(gg_unit_Ewrd_0109, 'Aamk') 
    call SelectHeroSkill(gg_unit_Ewrd_0109, 'Aamk') 
    call SelectHeroSkill(gg_unit_Ewrd_0109, 'Aamk') 
    call SelectHeroSkill(gg_unit_Ewrd_0109, 'Aamk') 
    call SelectHeroSkill(gg_unit_Ewrd_0109, 'Aamk') 
    call SelectHeroSkill(gg_unit_Ewrd_0109, 'A042') 
    call SelectHeroSkill(gg_unit_Ewrd_0109, 'A042') 
    call SelectHeroSkill(gg_unit_Ewrd_0109, 'A042') 
    call IssueImmediateOrder(gg_unit_Ewrd_0109, "") 
    call UnitAddItemToSlotById(gg_unit_Ewrd_0109, 'thdm', 0) 
    call UnitAddItemToSlotById(gg_unit_Ewrd_0109, 'thdm', 1) 
    call UnitAddItemToSlotById(gg_unit_Ewrd_0109, 'sor2', 2) 
    call UnitAddItemToSlotById(gg_unit_Ewrd_0109, 'thdm', 3) 
    call UnitAddItemToSlotById(gg_unit_Ewrd_0109, 'spre', 4) 
    set gg_unit_Hamg_0130 = CreateUnit(p, 'Hamg', -115.6, 1529.0, 11.350) 
    call SetHeroLevel(gg_unit_Hamg_0130, 20, false) 
    call SelectHeroSkill(gg_unit_Hamg_0130, 'Aamk') 
    call SelectHeroSkill(gg_unit_Hamg_0130, 'Aamk') 
    call SelectHeroSkill(gg_unit_Hamg_0130, 'Aamk') 
    call SelectHeroSkill(gg_unit_Hamg_0130, 'Aamk') 
    call SelectHeroSkill(gg_unit_Hamg_0130, 'Aamk') 
    call SelectHeroSkill(gg_unit_Hamg_0130, 'Aamk') 
    call SelectHeroSkill(gg_unit_Hamg_0130, 'Aamk') 
    call SelectHeroSkill(gg_unit_Hamg_0130, 'Aamk') 
    call SelectHeroSkill(gg_unit_Hamg_0130, 'Aamk') 
    call SelectHeroSkill(gg_unit_Hamg_0130, 'Aamk') 
    call SelectHeroSkill(gg_unit_Hamg_0130, 'Aamk') 
    call SelectHeroSkill(gg_unit_Hamg_0130, 'Aamk') 
    call SelectHeroSkill(gg_unit_Hamg_0130, 'Afae') 
    call SelectHeroSkill(gg_unit_Hamg_0130, 'Afae') 
    call SelectHeroSkill(gg_unit_Hamg_0130, 'Afae') 
    call IssueImmediateOrder(gg_unit_Hamg_0130, "faeriefireon") 
    call UnitAddItemToSlotById(gg_unit_Hamg_0130, 'hbth', 0) 
endfunction 

//=========================================================================== 
function CreatePlayerBuildings takes nothing returns nothing 
endfunction 

//=========================================================================== 
function CreatePlayerUnits takes nothing returns nothing 
    call CreateUnitsForPlayer0() 
    call CreateUnitsForPlayer1() 
    call CreateUnitsForPlayer2() 
    call CreateUnitsForPlayer3() 
    call CreateUnitsForPlayer4() 
    call CreateUnitsForPlayer5() 
    call CreateUnitsForPlayer6() 
    call CreateUnitsForPlayer7() 
    call CreateUnitsForPlayer8() 
    call CreateUnitsForPlayer9() 
    call CreateUnitsForPlayer10() 
    call CreateUnitsForPlayer11() 
endfunction 

//=========================================================================== 
function CreateAllUnits takes nothing returns nothing 
    call CreateNeutralPassiveBuildings() 
    call CreatePlayerBuildings() 
    call CreateNeutralHostile() 
    call CreateNeutralPassive() 
    call CreatePlayerUnits() 
endfunction 

//*************************************************************************** 
//* 
//*  Regions 
//* 
//*************************************************************************** 

function CreateRegions takes nothing returns nothing 
    local weathereffect we 

    set gg_rct______________000 = Rect(-768.0, -960.0, 160.0, -320.0) 
    set gg_rct______________001 = Rect(-5920.0, 2176.0, -4608.0, 3712.0) 
    set gg_rct______________002 = Rect(-3904.0, 3552.0, -2752.0, 4768.0) 
    set gg_rct______________003 = Rect(-896.0, 2464.0, 416.0, 3840.0) 
    set gg_rct______________004 = Rect(2400.0, 3552.0, 3456.0, 4736.0) 
    set gg_rct______________005 = Rect(4160.0, 2176.0, 5440.0, 3808.0) 
    set gg_rct______________006 = Rect(4384.0, 448.0, 5600.0, 1376.0) 
    set gg_rct______________007 = Rect(5024.0, -1472.0, 6432.0, -128.0) 
    set gg_rct______________008 = Rect(3456.0, -3616.0, 4704.0, -2048.0) 
    set gg_rct______________009 = Rect(5056.0, -5248.0, 6528.0, -4096.0) 
    set gg_rct______________010 = Rect(2080.0, -4352.0, 3360.0, -3264.0) 
    set gg_rct______________011 = Rect(-960.0, -3936.0, 352.0, -2336.0) 
    set gg_rct______________012 = Rect(-3616.0, -4384.0, -2464.0, -3136.0) 
    set gg_rct______________013 = Rect(-7008.0, -4480.0, -5568.0, -3008.0) 
    set gg_rct______________014 = Rect(-5216.0, -3584.0, -3808.0, -2112.0) 
    set gg_rct______________015 = Rect(-6912.0, -1408.0, -5504.0, -160.0) 
    set gg_rct______________016 = Rect(-6048.0, 160.0, -4800.0, 1280.0) 
    set gg_rct______________017 = Rect(-4128.0, -1280.0, -2944.0, 192.0) 
    set gg_rct______________018 = Rect(2368.0, -1280.0, 3616.0, 192.0) 
    set gg_rct_First_Area = Rect(-7616.0, -5760.0, 7456.0, 5184.0) 
    set gg_rct_boss = Rect(5888.0, 3840.0, 7072.0, 4960.0) 
    set we = AddWeatherEffect(gg_rct_boss, 'FDwh') 
    call EnableWeatherEffect(we, true) 
endfunction 

//*************************************************************************** 
//* 
//*  Custom Script Code 
//* 
//*************************************************************************** 
function CheckAlleyPlayerAbility takes player abilityplayer, integer abilitytype, integer abilityitem returns integer 
    local integer i = 0 
    local integer n = 71 + abilitytype 
    local integer bo = 0 

    loop 
        exitwhen i > 11 or bo == 38 
        if IsPlayerAlly(Player(i), abilityplayer) and LoadInteger(udg_Hash2, i + 1, n) == abilityitem then 
            set bo = 38 
        endif 
        set i = i + 1 
    endloop 

    return bo 
endfunction 





function H2I takes handle h returns integer 
    return GetHandleId(h) 
endfunction 


function ciwh takes unit u, integer it returns integer //return的数大于0说明有,否则没有 
    local integer i = 0 
    local integer n = 0 
    loop 
        exitwhen i > 5 
        if GetItemTypeId(UnitItemInSlot(u, i)) == it then 
            set n = n + 1 
        endif 
        set i = i + 1 
    endloop 
    return n 
endfunction 

function dlit takes unit u, integer it, integer n returns nothing //单位，删除物品，物品数量 
    local integer i = 0 
    local integer mi = 0 
    loop 
        exitwhen i > 5 or mi == n 
        if GetItemTypeId(UnitItemInSlot(u, i)) == it then 
            call RemoveItem(UnitItemInSlot(u, i)) 
            set mi = mi + 1 
        endif 
        set i = i + 1 
    endloop 
endfunction 




function DebugIdInteger2IdString takes integer value returns string 
    local string charMap = "..................................!.#$&'()*+,-./0123456789:;<=>.@ABCDEFGHIJKLMNOPQRSTUVWXYZ[.]^_`abcdefghijklmnopqrstuvwxyz{|}~................................................................................................................................" 
    local string result = "" 
    local integer remainingValue = value 
    local integer charValue 
    local integer byteno 

    set byteno = 0 
    loop 
        set charValue = ModuloInteger(remainingValue, 256) 
        set remainingValue = remainingValue / 256 
        set result = SubString(charMap, charValue, charValue + 1) + result 

        set byteno = byteno + 1 
        exitwhen byteno == 4 
    endloop 
    return result 
endfunction 

function debugS2I takes string targetstr returns integer 
    local string originstr = "..................................!.#$&'()*+,-./0123456789:;<=>.@ABCDEFGHIJKLMNOPQRSTUVWXYZ[.]^_`abcdefghijklmnopqrstuvwxyz{|}~................................................................................................................................" 
    local integer strlength = StringLength(targetstr) 
    local integer a = 0 //分部当前数字  
    local integer b = 0 //当前处理字    
    local integer numx = 1 //位权  
    local integer result = 0 
    loop 
        exitwhen b > strlength - 1 
        set numx = R2I(Pow(256, strlength - 1 - b)) 
        set a = 1 
        loop 
            exitwhen a > 255 
            if SubString(targetstr, b, b + 1) == SubString(originstr, a, a + 1) then 
                set result = result + a * numx 
                set a = 256 
            endif 
            set a = a + 1 
        endloop 
        set b = b + 1 
    endloop 
    return result 
endfunction 


function SMBI takes integer x, integer y, string str returns nothing 
    local multiboarditem mbi 
    set mbi = MultiboardGetItem(udg_BlackBoard, x, y) 
    call MultiboardSetItemValue(mbi, str) 
    call MultiboardReleaseItem(mbi) 
    set mbi = null 
endfunction 


function realangle takes real y, real x returns real //返回弧度先 
    local real sr = SquareRoot(y * y + x * x) 
    local real c = Atan(y / x) 
    local real s = Asin(y / sr) 
    if c > 0 and s > 0 then 
        return s 
    else 
        if s > 0 and c < 0 then 
            return 3.1415926 - s 
        else 
            if s < 0 and c > 0 then 
                return 3.1415926 - s 
            else 
                if s < 0 and c < 0 then 
                    return 3.1415926 * 2 + s 
                endif 
            endif 
        endif 
    endif 
endfunction 

function oppositeangle takes real r returns real //输入弧度，返回弧度 
    if r >= 0 and r < 3.1415926 then 
        return r + 3.1415926 
    else 
        if r >= 3.1415926 and r < 3.1415926 * 2 then 
            return r - 3.1415926 
        endif 
    endif 
endfunction 

function ninetyangle takes real r returns real //输入弧度，返回弧度，正转90度 
    local real p = 3.1415926 
    if r < 1.5 * p and r >= 0 then 
        return r + 0.5 * p 
    else 
        if r >= 1.5 * p and r < 2 * p then 
            return r - 1.5 * p 
        endif 
    endif 
endfunction 


function mninetyangle takes real r returns real //输入弧度，返回弧度，负转90度 
    local real p = 3.1415926 
    if r < 0.5 * p and r >= 0 then 
        return r + 1.5 * p 
    else 
        if r >= 0.5 * p and r < 2 * p then 
            return r - 0.5 * p 
        endif 
    endif 
endfunction 



function RealX takes real x returns real 
    if x < udg_XMIN then 
        return udg_XMIN 
    else 
        if x > udg_XMAX then 
            return udg_XMAX 
        else 
            return x 
        endif 
    endif 
endfunction 

function RealY takes real y returns real 
    if y < udg_YMIN then 
        return udg_YMIN 
    else 
        if y > udg_YMAX then 
            return udg_YMAX 
        else 
            return y 
        endif 
    endif 
endfunction 

function removetiaodao takes nothing returns nothing 
    local unit u = LoadUnitHandle(udg_Hash2, GetHandleId(GetExpiredTimer()), 1) 
    local integer h = GetHandleId(u) 
    local integer g = LoadInteger(udg_Hash3, h, 9999) 
    local item t 
    local integer i = 0 
    local integer n = 0 

    if g > 0 then 
        call SaveInteger(udg_Hash3, h, 9999, g - 1) 
        if ciwh(u, 'desc') >= 1 and GetUnitAbilityLevel(u, 'B02I') == 0 and GetUnitAbilityLevel(u, 'BNdo') == 0 and IsUnitType(u, UNIT_TYPE_POLYMORPHED) == false and IsUnitLoaded(u) == false then 
            loop 
                exitwhen i > 5 
                if GetItemTypeId(UnitItemInSlot(u, i)) == 'desc' then 
                    set n = i 
                    set i = 10 
    else 
                    set i = i + 1 
                endif 
            endloop 
            set t = UnitItemInSlot(u, n) 
            call UnitRemoveItemFromSlot(u, n) 
            call SetItemVisible(t, false) 
            call UnitAddItemToSlotById(u, 'I03K', n) 
        endif 
    else 
        if GetUnitState(u, UNIT_STATE_LIFE) > 0 and IsUnitType(u, UNIT_TYPE_POLYMORPHED) == false and GetUnitAbilityLevel(u, 'B02I') == 0 and GetUnitAbilityLevel(u, 'BNdo') == 0 and IsUnitLoaded(u) == false and IsUnitPaused(u) == false then 
            if ciwh(u, 'I03K') >= 1 then 
                loop 
                    exitwhen i > 5 
                    if GetItemTypeId(UnitItemInSlot(u, i)) == 'I03K' then 
                        set n = i 
                        set i = 10 
                    else 
                        set i = i + 1 
                    endif 
                endloop 
                set t = UnitItemInSlot(u, n) 
                call UnitRemoveItemFromSlot(u, n) 
                call SetItemVisible(t, false) 
                call UnitAddItemToSlotById(u, 'desc', n) 
            endif 
        endif 
    endif 
   
    set u = null 
    set t = null 
endfunction 
function yichubuff takes unit u returns nothing //移出BUFF 
    call UnitRemoveAbility(u, 'Bslo') 
    call UnitRemoveAbility(u, 'Bply') 
    call UnitRemoveAbility(u, 'BHbn') 
    call UnitRemoveAbility(u, 'Bmlt') 
    call UnitRemoveAbility(u, 'BOhx') 
    call UnitRemoveAbility(u, 'Bprg') 
    call UnitRemoveAbility(u, 'Beng') 
    call UnitRemoveAbility(u, 'Bena') 
    call UnitRemoveAbility(u, 'Bens') 
    call UnitRemoveAbility(u, 'Bpxf') 
    call UnitRemoveAbility(u, 'Bweb') 
    call UnitRemoveAbility(u, 'Bwea') 

    call UnitRemoveAbility(u, 'BUsl') 
    call UnitRemoveAbility(u, 'BUsp') 
    call UnitRemoveAbility(u, 'BUst') 
    call UnitRemoveAbility(u, 'BUim') 
    call UnitRemoveAbility(u, 'Bcri') //为了不限制小鱼人输出，取消了对残废的消除 
    call UnitRemoveAbility(u, 'Bcrs') 
    call UnitRemoveAbility(u, 'Bfae') 



    call UnitRemoveAbility(u, 'BEer') 
    call UnitRemoveAbility(u, 'BEsh') 
    call UnitRemoveAbility(u, 'BNcs') 
    call UnitRemoveAbility(u, 'BNic') 
    call UnitRemoveAbility(u, 'BNso') 
    call UnitRemoveAbility(u, 'BNab') 
    call UnitRemoveAbility(u, 'BIcb') 
    call UnitRemoveAbility(u, 'Bdet') 

    call UnitRemoveAbility(u, 'Bshs') 
    call UnitRemoveAbility(u, 'BSTN') 
    call UnitRemoveAbility(u, 'BPSE') 
    call UnitRemoveAbility(u, 'BNpa') 
    call UnitRemoveAbility(u, 'BNpm') 
    call UnitRemoveAbility(u, 'BNht') 
    call UnitRemoveAbility(u, 'BNdo') 
    //call UnitRemoveAbility( u, 'BNmr' ) 

    call UnitRemoveAbility(u, 'Bpsd') 
    call UnitRemoveAbility(u, 'BNba') 
    call UnitRemoveAbility(u, 'Bpoi') 
    call UnitRemoveAbility(u, 'B00U') 
    call UnitRemoveAbility(u, 'B00K') 
    call UnitRemoveAbility(u, 'B00I') 
    call UnitRemoveAbility(u, 'B01E') 
    call UnitRemoveAbility(u, 'B015') 

    call UnitRemoveAbility(u, 'B00D') 
    call UnitRemoveAbility(u, 'B013') 
    call UnitRemoveAbility(u, 'B00Y') 
    call UnitRemoveAbility(u, 'B01J') 
    call UnitRemoveAbility(u, 'B01K') 
    call UnitRemoveAbility(u, 'B01L') 
    call UnitRemoveAbility(u, 'B01I') 
    call UnitRemoveAbility(u, 'B01T') 
    call UnitRemoveAbility(u, 'B01U') 
    call UnitRemoveAbility(u, 'B01Z') 
    call UnitRemoveAbility(u, 'B009') 
    call UnitRemoveAbility(u, 'B00O') 
    call UnitRemoveAbility(u, 'B005') 
    call UnitRemoveAbility(u, 'B00N') 
    call UnitRemoveAbility(u, 'B01G') 
    call UnitRemoveAbility(u, 'B016') 
    call UnitRemoveAbility(u, 'B017') 
    call UnitRemoveAbility(u, 'B00P') 
    call UnitRemoveAbility(u, 'B00Q') 
    call UnitRemoveAbility(u, 'B007') 

    call UnitRemoveAbility(u, 'B01D') 
    call UnitRemoveAbility(u, 'B01F') 
    call UnitRemoveAbility(u, 'B00S') 
    call UnitRemoveAbility(u, 'B001') 
    call UnitRemoveAbility(u, 'B006') 
    call UnitRemoveAbility(u, 'B008') 
    call UnitRemoveAbility(u, 'B01Q') 
    call UnitRemoveAbility(u, 'B01U') 
    call UnitRemoveAbility(u, 'B01T') 
    call UnitRemoveAbility(u, 'B00V') 
    call UnitRemoveAbility(u, 'B02I') 
    call UnitRemoveAbility(u, 'B02J') 
    call UnitRemoveAbility(u, 'B02A') 
    call UnitRemoveAbility(u, 'B02R') 
    call UnitRemoveAbility(u, 'B02Q') 
    call UnitRemoveAbility(u, 'B01P') 
    call UnitRemoveAbility(u, 'B02L') 
    call UnitRemoveAbility(u, 'B02U') 
    call UnitRemoveAbility(u, 'B02Z') 
    call UnitRemoveAbility(u, 'B032') 
    call UnitRemoveAbility(u, 'B02Y') 
    call UnitRemoveAbility(u, 'B03G') 
    call UnitRemoveAbility(u, 'B037') 
    call UnitRemoveAbility(u, 'B02V') 
    call UnitRemoveAbility(u, 'B02T') 
    call UnitRemoveAbility(u, 'B02W') 
    call UnitRemoveAbility(u, 'B02X') 
    call UnitRemoveAbility(u, 'B02O') 
    call UnitRemoveAbility(u, 'B02K') 
    call UnitRemoveAbility(u, 'B035') 
    call UnitRemoveAbility(u, 'B03I') 
    call UnitRemoveAbility(u, 'B031') 
    call UnitRemoveAbility(u, 'B039') 
    call UnitRemoveAbility(u, 'B03C') 
    call UnitRemoveAbility(u, 'B03J') 
    call UnitRemoveAbility(u, 'B03K') 

    call UnitRemoveAbility(u, 'B03L') 
    call UnitRemoveAbility(u, 'B03M') 
    call UnitRemoveAbility(u, 'B03O') 
    call UnitRemoveAbility(u, 'B03P') 
    call UnitRemoveAbility(u, 'B03R') 
    call UnitRemoveAbility(u, 'B03U') 
    call UnitRemoveAbility(u, 'B03X') 
    call UnitRemoveAbility(u, 'B040') 
    call UnitRemoveAbility(u, 'B045') 
    call UnitRemoveAbility(u, 'B047') 
    call UnitRemoveAbility(u, 'B048') 
    call UnitRemoveAbility(u, 'B04B') 

endfunction 
////////////////////////////////////////////////////////海妖外壳和醉拳///////////////////////////////////////////////////////////////////////// 
//////////////////////因为每次改地图都要先删除Ability3再复制一个才能保证保存不会出错，又找不出解决的好办法///////////////////////////////////// 
//////////////////////所以只好出此下策，将这两个被动技能的函数提至自定义脚本区，这样就不会有什么问题了吧。2010.12.26/////////////////////////// 
function refreshbuff takes nothing returns nothing 
    local unit u = LoadUnitHandle(udg_Hash3, GetHandleId(GetExpiredTimer()), 1) 

    call yichubuff(u) 

    call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\NightElf\\NEDeathSmall\\NEDeathSmall.mdl", u, "origin")) 
    set u = null 
endfunction 


function seashiledact takes unit u returns nothing 
    local timer tm = CreateTimer() 
    call SaveUnitHandle(udg_Hash3, GetHandleId(tm), 1, u) 
    call TimerStart(tm, 7, true, function refreshbuff) 
    set tm = null 
endfunction 

function refreshdb takes nothing returns nothing 
    local unit u = LoadUnitHandle(udg_Hash3, GetHandleId(GetExpiredTimer()), 1) 
    local real level = 60 + 10 * GetUnitAbilityLevel(u, 'Acdb') 
    local integer i = GetHandleId(u) 

    call SetUnitVertexColor(u, LoadInteger(udg_Hash2, i, 10002), LoadInteger(udg_Hash2, i, 10003), LoadInteger(udg_Hash2, i, 10004), R2I(255 - (level / 100) * 255)) 

    set u = null 
endfunction 



function DrinkBoxingAct takes unit u returns nothing 
    local timer tm = CreateTimer() 
    call SaveUnitHandle(udg_Hash3, GetHandleId(tm), 1, u) 
    call TimerStart(tm, 10, true, function refreshdb) 
    set tm = null 
endfunction 




function harmgroupboolean takes nothing returns boolean 
    return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(udg_lsu)) == true and GetUnitAbilityLevel(GetFilterUnit(), 'Aloc') == 0 and IsUnitType(GetFilterUnit(), UNIT_TYPE_GIANT) == false 
endfunction 




function HarmGroup takes unit u, real r, real h returns nothing //单位，距离，伤害 
    local group g 
    local unit m 
    local boolexpr b 


    set udg_lsu = u 
    set g = CreateGroup() 
    set b = Condition(function harmgroupboolean) 
    call GroupEnumUnitsInRange(g, GetUnitX(u), GetUnitY(u), r, b) 
    loop 
        exitwhen IsUnitGroupEmptyBJ(g) == true 
        set m = FirstOfGroup(g) 
        call UnitDamageTarget(u, m, h, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
        call GroupRemoveUnit(g, m) 
    endloop 
    call GroupClear(g) 
    call DestroyGroup(g) 
    call DestroyBoolExpr(b) 


    set g = null 
    set b = null 
    set m = null 
endfunction 
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// 
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// 
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// 
////////////////////////////////////////////////////////////////////复活函数//////////////////////////////////////////////////////////////////// 
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// 
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// 
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// 
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// 
function RefreshColor takes unit m returns nothing 
    local integer n = GetUnitTypeId(m) 
    local integer i = GetHandleId(m) 

    if n == 'Hpb1' then //XF1 
        call SaveInteger(udg_Hash2, i, 10002, 160) 
        call SaveInteger(udg_Hash2, i, 10003, 200) 
        call SaveInteger(udg_Hash2, i, 10004, 255) 
    else 
        if n == 'Osam' then //MR2 
            call SaveInteger(udg_Hash2, i, 10002, 255) 
            call SaveInteger(udg_Hash2, i, 10003, 90) 
            call SaveInteger(udg_Hash2, i, 10004, 80) 
        else 
            if n == 'Ulic' then //Lion3 
                call SaveInteger(udg_Hash2, i, 10002, 60) 
                call SaveInteger(udg_Hash2, i, 10003, 200) 
                call SaveInteger(udg_Hash2, i, 10004, 100) 
            else 
                if n == 'Udre' then //Kimi4 
                    call SaveInteger(udg_Hash2, i, 10002, 160) 
                    call SaveInteger(udg_Hash2, i, 10003, 160) 
                    call SaveInteger(udg_Hash2, i, 10004, 150) 
                else 
                    if n == 'Npld' then //猛犸5 
                        call SaveInteger(udg_Hash2, i, 10002, 255) 
                        call SaveInteger(udg_Hash2, i, 10003, 225) 
                        call SaveInteger(udg_Hash2, i, 10004, 130) 
                    else 
                        if n == 'Nplh' then //38h6 
                            call SaveInteger(udg_Hash2, i, 10002, 150) 
                            call SaveInteger(udg_Hash2, i, 10003, 175) 
                            call SaveInteger(udg_Hash2, i, 10004, 255) 
                        else 
                            if n == 'Ekee' then //搞死棍7 
                                call SaveInteger(udg_Hash2, i, 10002, 255) 
                                call SaveInteger(udg_Hash2, i, 10003, 255) 
                                call SaveInteger(udg_Hash2, i, 10004, 150) 
                            else 
                                if n == 'Ewar' then //ljz8 
                                    call SaveInteger(udg_Hash2, i, 10002, 180) 
                                    call SaveInteger(udg_Hash2, i, 10003, 255) 
                                    call SaveInteger(udg_Hash2, i, 10004, 255) 
                                else 
                                    if n == 'Efur' then //VIP9 
                                        call SaveInteger(udg_Hash2, i, 10002, 60) 
                                        call SaveInteger(udg_Hash2, i, 10003, 255) 
                                        call SaveInteger(udg_Hash2, i, 10004, 0) 
                                    else 
                                        if n == 'Emns' then //V姐10 
                                            call SaveInteger(udg_Hash2, i, 10002, 150) 
                                            call SaveInteger(udg_Hash2, i, 10003, 110) 
                                            call SaveInteger(udg_Hash2, i, 10004, 70) 
                                        else 
                                            if n == 'Ecen' then //蠢东西11 
                                                call SaveInteger(udg_Hash2, i, 10002, 0) 
                                                call SaveInteger(udg_Hash2, i, 10003, 255) 
                                                call SaveInteger(udg_Hash2, i, 10004, 255) 
                                            else 
                                                if n == 'Eill' then //V弟 
                                                    call SaveInteger(udg_Hash2, i, 10002, 190) 
                                                    call SaveInteger(udg_Hash2, i, 10003, 100) 
                                                    call SaveInteger(udg_Hash2, i, 10004, 230) 
                                                else 
                                                    if n == 'Ogld' then //MAY 
                                                        call SaveInteger(udg_Hash2, i, 10002, 255) 
                                                        call SaveInteger(udg_Hash2, i, 10003, 50) 
                                                        call SaveInteger(udg_Hash2, i, 10004, 50) 
                                                    else 
                                                        if n == 'O002' then //赏金 
                                                            call SaveInteger(udg_Hash2, i, 10002, 255) 
                                                            call SaveInteger(udg_Hash2, i, 10003, 220) 
                                                            call SaveInteger(udg_Hash2, i, 10004, 0) 
                                                        else 
                                                            if n == 'H00D' then //海洋之灾 
                                                                call SaveInteger(udg_Hash2, i, 10002, 80) 
                                                                call SaveInteger(udg_Hash2, i, 10003, 140) 
                                                                call SaveInteger(udg_Hash2, i, 10004, 255) 
                                                            else 
                                                                call SaveInteger(udg_Hash2, i, 10002, 255) 
                                                                call SaveInteger(udg_Hash2, i, 10003, 255) 
                                                                call SaveInteger(udg_Hash2, i, 10004, 255) 
                                                            endif 
                                                        endif 
                                                    endif 
                                                endif 
                                            endif 
                                        endif 
                                    endif 
                                endif 
                            endif 
                        endif 
                    endif 
                endif 
            endif 
        endif 
    endif 

endfunction 

function RefreshScale takes unit u returns real 
    local integer m = GetUnitTypeId(u) 
    if m == 'Hamg' then //刘弟1 
        return 1.4 
    else 
        if m == 'Hblm' then //MYD女2 
            return 1.4 
        else 
            if m == 'Ntin' then //洒水车3 
                return 1.5 
            else 
                if m == 'Naka' or m == 'Ocb2' or m == 'U004' then //LW4 
                    return 1.2 
                else 
                    if m == 'Hvwd' then //马蹄糕5 
                        return 1.8 
                    else 
                        if m == 'Obla' then //兽兽6 
                            return 1.15 
                        else 
                            if m == 'Ofar' then //土豆7 
                                return 0.7 
                            else 
                                if m == 'Otch' then //马脸8 
                                    return 1.6 
                                else 
                                    if m == 'Oshd' then //猪哥9 
                                        return 1.4 
                                    else 
                                        if m == 'Osam' then //MR10 
                                            return 0.8 
                                        else 
                                            if m == 'Orex' then //狗叼11 
                                                return 2.0 
                                            else 
                                                if m == 'Ulic' then //Lion12 
                                                    return 1.16 
                                                else 
                                                    if m == 'Udre' then //kimi13 
                                                        return 2.0 
                                                    else 
                                                        if m == 'Ucrl' then //小强14 
                                                            return 0.9 
                                                        else 
                                                            if m == 'Ekee' or m == 'O00E' then //搞死棍15 
                                                                return 1.1 
                                                            else 
                                                                if m == 'Ewar' then //ljz16 
                                                                    return 0.8 
                                                                else 
                                                                    if m == 'Eill' then //V弟17 
                                                                        return 1.8 
                                                                    else 
                                                                        if m == 'Emns' then //V姐18 
                                                                            return 0.6 
                                                                        else 
                                                                            if m == 'Hmgd' then //龙哥19 
                                                                                return 1.35 
                                                                            else 
                                                                                if m == 'N004' then //真龙20 
                                                                                    return 1.15 
                                                                                else 
                                                                                    if m == 'Ewrd' then //UG21 
                                                                                        return 0.8 
                                                                                    else 
                                                                                        if m == 'Hlgr' then //白马仔 
                                                                                            return 1.26 
                                                                                        else 
                                                                                            if m == 'Hapm' then //发条 
                                                                                                return 1.3 
                                                                                            else 
                                                                                                if m == 'Ekgg' then //wisp 
                                                                                                    return 2.0 
                                                                                                else 
                                                                                                    if m == 'Ecen' then //cdx 
                                                                                                        return 1.4 
                                                                                                    else 
                                                                                                        if m == 'Ogld' then //MAY 
                                                                                                            return 1.5 
                                                                                                        else 
                                                                                                            if m == 'O002' or m == 'Uktl' then //赏金,lich 
                                                                                                                return 1.25 
                                                                                                            else 
                                                                                                                if m == 'O001' then //熊战 
                                                                                                                    return 1.25 
                                                                                                                else 
                                                                                                                    if m == 'O00A' then //混沌 
                                                                                                                        return 1.25 
                                                                                                                    else 
                                                                                                                        if m == 'H00A' or m == 'H009' then //风行 
                                                                                                                            return 1.1 
                                                                                                                        else 
                                                                                                                            if m == 'H00C' then //死歌 
                                                                                                                                return 1.75 
                                                                                                                            else 
                                                                                                                                if m == 'H00D' then //海洋之灾 
                                                                                                                                    return 1.7 
                                                                                                                                else 
                                                                                                                                    return 1.0 
                                                                                                                                endif 
                                                                                                                            endif 
                                                                                                                        endif 
                                                                                                                    endif 
                                                                                                                endif 
                                                                                                            endif 
                                                                                                        endif 
                                                                                                    endif 
                                                                                                endif 
                                                                                            endif 
                                                                                        endif 
                                                                                    endif 
                                                                                endif 
                                                                            endif 
                                                                        endif 
                                                                    endif 
                                                                endif 
                                                            endif 
                                                        endif 
                                                    endif 
                                                endif 
                                            endif 
                                        endif 
                                    endif 
                                endif 
                            endif 
                        endif 
                    endif 
                endif 
            endif 
        endif 
    endif 
endfunction 


function deadxiangwei takes unit u returns nothing 
    local timer tm = LoadTimerHandle(udg_Hash3, GetHandleId(u), 6) 
    local integer m = GetHandleId(tm) 
    local integer i = 0 
    local integer n = 0 
    local item t = LoadItemHandle(udg_Hash3, m, 2) 

    loop 
        exitwhen i > 5 
        if GetItemTypeId(UnitItemInSlot(u, i)) == 'I01D' then 
            set n = i 
            set i = 10 
        else 
            set i = i + 1 
        endif 
    endloop 

    call UnitRemoveAbility(u, 'B00R') 
    call SetUnitPathing(u, true) 
    call RemoveItem(UnitItemInSlot(u, n)) 
    call SetItemVisible(t, true) 
    call UnitAddItemToSlotById(u, 'tmmt', n) 
    call RemoveItem(t) 

    call PauseTimer(tm) 
    call FlushChildHashtable(udg_Hash3, m) 
    call DestroyTimer(tm) 

    set tm = null 
    set t = null 
endfunction 


function RefreshSmallAbility takes unit u returns nothing 
    local integer i = GetUnitTypeId(u) 
    local player p = GetOwningPlayer(u) 
    if i == 'Osam' then //MR 
        call UnitRemoveAbility(u, 'Amgl') 
        call SetPlayerAbilityAvailable(p, 'A03O', true) 
        call SetPlayerAbilityAvailable(p, 'A03R', false) 
        call UnitRemoveAbility(u, 'B012') 
    else 
        if i == 'Othr' then //蝙蝠侠 
            call UnitRemoveAbility(u, 'Amgl') 
            call SetPlayerAbilityAvailable(p, 'A03J', true) 
            call SetPlayerAbilityAvailable(p, 'Aliq', false) 
        else 
            if i == 'Hpb2' then //豹爷 
                call UnitRemoveAbility(u, 'Amgl') 
                call SetPlayerAbilityAvailable(p, 'A046', false) 
                call SetPlayerAbilityAvailable(p, 'ANsg', true) 
                call UnitRemoveAbility(u, 'B01B') 
            else 
            endif 
        endif 
    endif 
    set p = null 
endfunction 

function RefreshBigAbility takes unit u returns nothing 
    local integer i = GetUnitTypeId(u) 
    local player p = GetOwningPlayer(u) 
    if i == 'Obla' then //兽兽 
        call UnitRemoveAbility(u, 'Amgr') 
        call UnitRemoveAbility(u, 'Agho') 
        call UnitRemoveAbility(u, 'Apiv') 
        call SetPlayerAbilityAvailable(p, 'AOsf', true) 
    else 
        if i == 'Nplh' then //38H 
            call UnitRemoveAbility(u, 'A009') 
            call UnitRemoveAbility(u, 'Amgr') 
            call SetPlayerAbilityAvailable(p, 'AOsh', true) 
        else 
            if i == 'Eill' then //V弟 
                call UnitRemoveAbility(u, 'Amgr') 
                call SetPlayerAbilityAvailable(p, 'A03F', true) 
            else 
            endif 
        endif 
    endif 
    set p = null 
endfunction 
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// 
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// 
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// 
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// 
/////////////////////////////////新加入了随机英雄系统，前30秒可以-random选择不减钱，前60秒可以-repick但扣200金/////////////////////////////////// 
/////////////////////////////////如此一算，即便12人一块玩，前60秒也最多re72个英雄，等做满6个酒馆也就刚好72个英雄，真是公德圆满啊///////////////// 
///以下为被选的英雄禁用////// 
function unaviliable takes integer n returns nothing 
    local integer i = 0 
    loop 
        exitwhen i > 11 
        call SetPlayerTechMaxAllowed(Player(i), n, 0) 
        set i = i + 1 
    endloop 
endfunction 


////////////////////////////////////////////////////////////////////调整高度//////////////////////////////////////////////////////////////////// 
function tiaozhengact takes nothing returns nothing 
    local unit u = LoadUnitHandle(udg_Hash1, GetHandleId(GetExpiredTimer()), 1) 
    if GetUnitDefaultFlyHeight(u) < 10 and GetUnitAbilityLevel(u, 'A04D') == 0 then 
        call SetUnitFlyHeight(u, 0.00, 480.00) 
    endif 
    if GetUnitAbilityLevel(u, 'A00A') > 0 or GetUnitAbilityLevel(u, 'Afrb') > 0 then 
        call SetUnitFlyHeight(u, 250.00, 480.00) 
    endif 
    set u = null 
endfunction 


function tiaozhengz takes unit u returns nothing 
    local timer tm = CreateTimer() 
    call SaveUnitHandle(udg_Hash1, GetHandleId(tm), 1, u) 
    call TimerStart(tm, 3, true, function tiaozhengact) 
    set tm = null 
endfunction 



///////////////////////////////////////////////////////////////////////受伤害函数/////////////////////////////////////////////////////////////// 
function GetHarmCondition takes nothing returns boolean 
    local unit u = GetTriggerUnit() 
    local unit m = GetEventDamageSource() 
    local real h = GetEventDamage() 
    local integer i = 0 
    local integer g = GetConvertedPlayerId(GetOwningPlayer(m)) 
    local trigger tr = GetTriggeringTrigger() 
    local integer n = GetUnitTypeId(m) 
    if h < 0 and n != 'e000' then //法伤 
        set h = -101 * h 
        call DisableTrigger(tr) 
        call UnitDamageTarget(m, u, h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
        call EnableTrigger(tr) 
        if GetUnitAbilityLevel(u, 'B002') > 0 then //幽灵船减伤 
            call SetUnitState(u, UNIT_STATE_LIFE, GetUnitState(u, UNIT_STATE_LIFE) + (0.3 * h)) 
            set h = 0.7 * h 
        endif 
        if GetUnitAbilityLevel(u, 'B02G') > 0 then //刃甲反伤 
            set u = CreateUnit(GetTriggerPlayer(), 'e000', 0, 0, 0) 
            if GetUnitAbilityLevel(m, 'Aloc') == 0 then 
                call UnitDamageTarget(u, m, h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
            else 
                call UnitDamageTarget(u, udg_PlayerLockToHero[g], h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
            endif 
            call UnitApplyTimedLife(u, 'BTLF', 5.00) 
        endif 
        if GetUnitAbilityLevel(u, 'BNso') > 0 then //紫怨加伤 
            call DisableTrigger(tr) 
            call UnitDamageTarget(m, u, 0.2 * h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
            call EnableTrigger(tr) 
        endif 
        if GetUnitAbilityLevel(u, 'Bshs') > 0 then //黄泉颤抖加伤 
            set i = GetUnitAbilityLevel(LoadUnitHandle(udg_Hash1, GetHandleId(gg_trg_Zhuanyishanghai), 1), 'Ashs') 
            call DisableTrigger(tr) 
            call UnitDamageTarget(m, u, (3 + i) * 0.1 * h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
            call EnableTrigger(tr) 
        endif 
        if GetUnitAbilityLevel(udg_PlayerLockToHero[g], 'B049') > 0 then //杀人书 
            call DisableTrigger(tr) 
            call UnitDamageTarget(m, u, 0.04 * h * LoadInteger(udg_Hash4, GetHandleId(udg_PlayerLockToHero[g]), 1112), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
            call EnableTrigger(tr) 
        endif 
        if GetUnitAbilityLevel(udg_PlayerLockToHero[g], 'B04F') > 0 then //灭世 
            call DisableTrigger(tr) 
            call UnitDamageTarget(m, u, 0.6 * h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
            call EnableTrigger(tr) 
        endif 
        if GetUnitAbilityLevel(m, 'Aloc') == 0 then //吸血鬼,科技枪 
            if GetUnitAbilityLevel(m, 'B04D') > 0 then 
                call SetUnitState(m, UNIT_STATE_LIFE, GetUnitState(m, UNIT_STATE_LIFE) + 0.15 * h) 
                call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", m, "chest")) 
            endif 
            set i = GetUnitAbilityLevel(m, 'A0DW') 
            if i > 0 then 
                call SetUnitState(m, UNIT_STATE_LIFE, GetUnitState(m, UNIT_STATE_LIFE) + 0.1 * h * i) 
                call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", m, "chest")) 
            endif 
        else 
            if GetUnitAbilityLevel(udg_PlayerLockToHero[g], 'B04D') > 0 then 
                call SetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE, GetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE) + 0.15 * h) 
                call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", udg_PlayerLockToHero[g], "chest")) 
            endif 
            set i = GetUnitAbilityLevel(udg_PlayerLockToHero[g], 'A0DW') 
            if i > 0 then 
                call SetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE, GetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE) + 0.1 * h * i) 
                call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", udg_PlayerLockToHero[g], "chest")) 
            endif 
        endif 
        if GetUnitAbilityLevel(udg_PlayerLockToHero[g], 'B04A') > 0 and GetUnitAbilityLevel(u, 'B04B') == 0 then //冰霜节杖 
            call UnitAddAbility(u, 'A0DH') 
            call UnitRemoveAbility(u, 'A0DH') 
            call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", u, "chest")) 
        endif 
        if h > 0 and GetOwningPlayer(m) != Player(PLAYER_NEUTRAL_AGGRESSIVE) then 
            call SaveInteger(udg_Hash3, GetHandleId(u), 9999, 10) 
        endif 
        if GetUnitAbilityLevel(u, 'B03M') > 0 then 
            call SetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE, GetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE) + 0.1 * h * LoadInteger(udg_Hash2, GetHandleId(u), 9494)) 
            call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", udg_PlayerLockToHero[g], "chest")) 
            call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", u, "chest")) 
        endif 
        set u = null 
        set m = null 
        set tr = null 
        return false 
    else 
        if n == 'n00T' and h < 2000 and h > 0 then //神圣伤害 
            if GetUnitAbilityLevel(u, 'B002') > 0 then //幽灵船减伤 
                call SetUnitState(u, UNIT_STATE_LIFE, GetUnitState(u, UNIT_STATE_LIFE) + (0.3 * h)) 
                set h = 0.7 * h 
            endif 
            if GetUnitAbilityLevel(u, 'B02G') > 0 then //刃甲反伤 
                set u = CreateUnit(GetTriggerPlayer(), 'e000', 0, 0, 0) 
                if GetUnitAbilityLevel(m, 'Aloc') == 0 then 
                    call UnitDamageTarget(u, m, h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
    else 
                    call UnitDamageTarget(u, udg_PlayerLockToHero[g], h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
                endif 
                call UnitApplyTimedLife(u, 'BTLF', 5.00) 
            endif 
            if GetUnitAbilityLevel(u, 'BNso') > 0 then //紫怨加伤 
                call DisableTrigger(tr) 
                call UnitDamageTarget(m, u, 0.2 * h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
                call EnableTrigger(tr) 
            endif 
            if GetUnitAbilityLevel(u, 'Bshs') > 0 then //黄泉颤抖加伤 
                set i = GetUnitAbilityLevel(LoadUnitHandle(udg_Hash1, GetHandleId(gg_trg_Zhuanyishanghai), 1), 'Ashs') 
                call DisableTrigger(tr) 
                call UnitDamageTarget(m, u, (3 + i) * 0.1 * h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
                call EnableTrigger(tr) 
            endif 
            if GetUnitAbilityLevel(udg_PlayerLockToHero[g], 'B049') > 0 then //杀人书 
                call DisableTrigger(tr) 
                call UnitDamageTarget(m, u, 0.04 * h * LoadInteger(udg_Hash4, GetHandleId(udg_PlayerLockToHero[g]), 1112), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
                call EnableTrigger(tr) 
            endif 
            if GetUnitAbilityLevel(udg_PlayerLockToHero[g], 'B04F') > 0 then //灭世 
                call DisableTrigger(tr) 
                call UnitDamageTarget(m, u, 0.6 * h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
                call EnableTrigger(tr) 
            endif 
            if GetUnitAbilityLevel(m, 'Aloc') == 0 then //吸血鬼,科技枪 
                if GetUnitAbilityLevel(m, 'B04D') > 0 then 
                    call SetUnitState(m, UNIT_STATE_LIFE, GetUnitState(m, UNIT_STATE_LIFE) + 0.15 * h) 
                    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", m, "chest")) 
                endif 
                set i = GetUnitAbilityLevel(m, 'A0DW') 
                if i > 0 then 
                    call SetUnitState(m, UNIT_STATE_LIFE, GetUnitState(m, UNIT_STATE_LIFE) + 0.1 * h * i) 
                    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", m, "chest")) 
                endif 
            else 
                if GetUnitAbilityLevel(udg_PlayerLockToHero[g], 'B04D') > 0 then 
                    call SetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE, GetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE) + 0.15 * h) 
                    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", udg_PlayerLockToHero[g], "chest")) 
                endif 
                set i = GetUnitAbilityLevel(udg_PlayerLockToHero[g], 'A0DW') 
                if i > 0 then 
                    call SetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE, GetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE) + 0.1 * h * i) 
                    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", udg_PlayerLockToHero[g], "chest")) 
                endif 
            endif 
            if GetUnitAbilityLevel(udg_PlayerLockToHero[g], 'B04A') > 0 and GetUnitAbilityLevel(u, 'B04B') == 0 then //冰霜节杖 
                call UnitAddAbility(u, 'A0DH') 
                call UnitRemoveAbility(u, 'A0DH') 
                call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", u, "chest")) 
            endif 
            if h > 0 and GetOwningPlayer(m) != Player(PLAYER_NEUTRAL_AGGRESSIVE) then 
                call SaveInteger(udg_Hash3, GetHandleId(u), 9999, 10) 
            endif 
            if GetUnitAbilityLevel(u, 'B03M') > 0 then 
                call SetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE, GetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE) + 0.1 * h * LoadInteger(udg_Hash2, GetHandleId(u), 9494)) 
                call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", udg_PlayerLockToHero[g], "chest")) 
                call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", u, "chest")) 
            endif 
            set u = null 
            set m = null 
            set tr = null 
            return false 
        else 
            if IsUnitAlly(m, GetTriggerPlayer()) == false and h < 2000 and h > 0 and n != 'e000' then //物理伤 
                set u = null 
                set m = null 
                set tr = null 
                return true 
            endif 
        endif 
    endif 
    return false 
endfunction 

function GetHarmAction takes nothing returns nothing 
    local unit u = GetTriggerUnit() 
    local unit m = GetEventDamageSource() 
    local real h = GetEventDamage() 
    local integer i = 0 
    local integer g = GetConvertedPlayerId(GetOwningPlayer(m)) 
    local trigger tr = GetTriggeringTrigger() 
       
    if GetUnitTypeId(m) == 'owyv' or GetUnitTypeId(m) == 'echm' then //立即杀死叠加毒单位和雷神之怒单位 
        call KillUnit(m) 
    endif 
    
    if GetUnitAbilityLevel(u, 'B002') > 0 then //幽灵船减伤 
        call SetUnitState(u, UNIT_STATE_LIFE, GetUnitState(u, UNIT_STATE_LIFE) + (0.3 * h)) 
        set h = 0.7 * h 
    endif 
       
    if GetUnitAbilityLevel(u, 'B02G') > 0 then //刃甲反伤 
        set u = CreateUnit(GetTriggerPlayer(), 'e000', 0, 0, 0) 
        if GetUnitAbilityLevel(m, 'Aloc') == 0 then 
            call UnitDamageTarget(u, m, h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
        else 
            call UnitDamageTarget(u, udg_PlayerLockToHero[g], h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
        endif 
        call UnitApplyTimedLife(u, 'BTLF', 5.00) 
    endif 

    if GetUnitAbilityLevel(u, 'B04C') > 0 then //荆棘反伤 
        set u = CreateUnit(GetTriggerPlayer(), 'e000', 0, 0, 0) 
        if GetUnitAbilityLevel(m, 'Aloc') == 0 then 
            call UnitDamageTarget(u, m, 0.3 * h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS) 
        else 
            call UnitDamageTarget(u, udg_PlayerLockToHero[g], 0.3 * h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS) 
        endif 
        call UnitApplyTimedLife(u, 'BTLF', 5.00) 
    endif 
  
    if GetUnitAbilityLevel(u, 'BNso') > 0 then //紫怨加伤 
        call DisableTrigger(tr) 
        call UnitDamageTarget(m, u, 0.2 * h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
        call EnableTrigger(tr) 
    endif 
    if GetUnitAbilityLevel(u, 'Bshs') > 0 then //黄泉颤抖加伤 
        set i = GetUnitAbilityLevel(LoadUnitHandle(udg_Hash1, GetHandleId(gg_trg_Zhuanyishanghai), 1), 'Ashs') 
        call DisableTrigger(tr) 
        call UnitDamageTarget(m, u, (3 + i) * 0.1 * h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS) 
        call EnableTrigger(tr) 
    endif 
    
    if GetUnitAbilityLevel(udg_PlayerLockToHero[g], 'B04A') > 0 and GetUnitAbilityLevel(u, 'B04B') == 0 then //冰霜节杖 
        call UnitAddAbility(u, 'A0DH') 
        call UnitRemoveAbility(u, 'A0DH') 
        call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", u, "chest")) 
    endif 
      
    if h > 0 and GetOwningPlayer(m) != Player(PLAYER_NEUTRAL_AGGRESSIVE) then //跳刀 
        call SaveInteger(udg_Hash3, GetHandleId(u), 9999, 10) 
    endif 
    
    if GetUnitAbilityLevel(u, 'B03M') > 0 then //撕裂伤口 
        call SetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE, GetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE) + 0.1 * h * LoadInteger(udg_Hash2, GetHandleId(u), 9494)) 
        call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", udg_PlayerLockToHero[g], "chest")) 
        call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", u, "chest")) 
    endif 
    
    if GetUnitAbilityLevel(m, 'Aloc') == 0 then //吸血鬼 
        if GetUnitAbilityLevel(m, 'B04D') > 0 then 
            call SetUnitState(m, UNIT_STATE_LIFE, GetUnitState(m, UNIT_STATE_LIFE) + 0.15 * h) 
            call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", m, "chest")) 
        endif 
    else 
        if GetUnitAbilityLevel(udg_PlayerLockToHero[g], 'B04D') > 0 then 
            call SetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE, GetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE) + 0.15 * h) 
            call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", udg_PlayerLockToHero[g], "chest")) 
        endif 
    endif 
    set u = null 
    set m = null 
    set tr = null 
endfunction 



function AddGetHarmTrigger takes unit u returns nothing 
    local trigger tr = CreateTrigger() 
    local integer i = GetConvertedPlayerId(GetOwningPlayer(u)) 
    local player p = GetOwningPlayer(u) 
    local timer tm = CreateTimer() 
    //set udg_Bag[i]=CreateUnit(GetOwningPlayer(u),'Hdgo',GetUnitX(u),GetUnitY(u),0)//背包编号1-12 
    //call SetHeroLevel( udg_Bag[i],25, false ) 
    //call TriggerRegisterUnitEvent( gg_trg_DropSB, udg_Bag[i], EVENT_UNIT_PICKUP_ITEM ) 
    //call TriggerRegisterUnitEvent( gg_trg_MoveHero, udg_Bag[i], EVENT_UNIT_ISSUED_POINT_ORDER ) 
    //call TriggerRegisterUnitEvent( gg_trg_ChooseHero, udg_Bag[i], EVENT_UNIT_SELECTED ) 
    //call TriggerRegisterUnitEvent( gg_trg_ChooseHero, udg_PlayerLockToHero[i], EVENT_UNIT_SELECTED ) 
    call TriggerRegisterUnitEvent(gg_trg_bozangharm, u, EVENT_UNIT_DAMAGED) 
    call TriggerRegisterUnitEvent(tr, u, EVENT_UNIT_DAMAGED) 
    call TriggerRegisterUnitEvent(gg_trg_DropItem, u, EVENT_UNIT_DROP_ITEM) 
    call TriggerAddCondition(tr, Condition(function GetHarmCondition)) 
    call TriggerAddAction(tr, function GetHarmAction) 
    call TriggerRegisterUnitEvent(gg_trg_AttackOther, u, EVENT_UNIT_TARGET_IN_RANGE) 
    call UnitAddAbility(u, 'A0DS') //军团护盾 
    call SetPlayerAbilityAvailable(p, 'A0DS', false) 
    call IssueNeutralTargetOrderById(p, gg_unit_nmer_0003, 852566, u) 
    call IssueNeutralTargetOrderById(p, gg_unit_nmr5_0105, 852566, u) 
    call IssueNeutralTargetOrderById(p, gg_unit_nmr2_0021, 852566, u) 
    call IssueNeutralTargetOrderById(p, gg_unit_nmr6_0106, 852566, u) 
    call IssueNeutralTargetOrderById(p, gg_unit_nmr3_0090, 852566, u) 
    call IssueNeutralTargetOrderById(p, gg_unit_nmr7_0107, 852566, u) 
    call IssueNeutralTargetOrderById(p, gg_unit_utom_0132, 852566, u) 
    call IssueNeutralTargetOrderById(p, gg_unit_ovln_0129, 852566, u) 
    call IssueNeutralTargetOrderById(p, gg_unit_ngme_0005, 852566, u) 
    call IssueNeutralTargetOrderById(p, gg_unit_eden_0131, 852566, u) 
    call IssueNeutralTargetOrderById(p, gg_unit_ngad_0133, 852566, u) 
    call IssueNeutralTargetOrderById(p, gg_unit_harm_0113, 852566, u) 
    call IssueNeutralTargetOrderById(p, gg_unit_nmrd_0136, 852566, u) 
    call IssueNeutralTargetOrderById(p, gg_unit_nmr4_0135, 852566, u) 
    call IssueNeutralTargetOrderById(p, gg_unit_hvlt_0020, 852566, u) 
    call IssueNeutralTargetOrderById(p, gg_unit_nmr0_0138, 852566, u) 
    call IssueNeutralTargetOrderById(p, gg_unit_nmrf_0134, 852566, u) 
    call IssueNeutralTargetOrderById(p, gg_unit_hars_0137, 852566, u) 
    call IssueNeutralTargetOrderById(p, gg_unit_edob_0140, 852566, u) 
    call SaveUnitHandle(udg_Hash2, GetHandleId(tm), 1, u) 
    call SaveTimerHandle(udg_Hash2, GetHandleId(u), 9999, tm) 
    call SaveInteger(udg_Hash3, GetHandleId(u), 9999, 0) 
    call SaveReal(udg_Hash2, GetHandleId(u), 10001, RefreshScale(u)) //储存单位大小 
    call RefreshColor(u) //储存单位颜色 
    call UnitAddAbility(u, 'A0E5') 
    if IsUnitType(u, UNIT_TYPE_RANGED_ATTACKER) then 
        call SetUnitAcquireRange(u, 650.00) 
        if GetUnitTypeId(u) == 'Nmag' then 
            call SetUnitAcquireRange(u, 850.00) 
        endif 
    endif 
    set tm = null 
    set p = null 
    set tr = null 
endfunction 



function checkbaoji takes nothing returns nothing 
    local unit u = LoadUnitHandle(udg_Hash1, GetHandleId(GetExpiredTimer()), 1) 
    local real h = GetUnitState(u, UNIT_STATE_LIFE) 
    local real mh = GetUnitState(u, UNIT_STATE_MAX_LIFE) 
    local real bh = h / mh 
    local integer rh = R2I((1 - bh) * 50) 
    if GetUnitAbilityLevel(u, 'B046') > 0 then 
        call SetUnitAbilityLevel(u, 'A0CP', 50) 
    else 
        call SetUnitAbilityLevel(u, 'A0CP', rh) 
    endif 
    set u = null 
endfunction 


function wujindebaojieeee takes unit u returns nothing ////蛮子 
    local timer tm = CreateTimer() 
    local integer i = GetHandleId(tm) 
    call SaveUnitHandle(udg_Hash1, i, 1, u) 
    call TimerStart(tm, 0.5, true, function checkbaoji) 
    set tm = null 
endfunction 




////////////////////////单位受伤害事件////////////////////////////////////////// 
function GetDamageAction takes nothing returns boolean 
    local unit u = GetTriggerUnit() 
    local unit m = GetEventDamageSource() 
    local real h = GetEventDamage() 
    local integer i = 0 
    local integer g = GetConvertedPlayerId(GetOwningPlayer(m)) 
    local trigger tr = GetTriggeringTrigger() 
    local integer n = GetUnitTypeId(m) 
    if h < 0 and n != 'e000' then //法伤 
        set h = -101 * h 
        call DisableTrigger(tr) 
        call UnitDamageTarget(m, u, h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
        call EnableTrigger(tr) 
        if GetUnitAbilityLevel(u, 'B002') > 0 then //幽灵船减伤 
            call SetUnitState(u, UNIT_STATE_LIFE, GetUnitState(u, UNIT_STATE_LIFE) + (0.3 * h)) 
            set h = 0.7 * h 
        endif 
        if GetUnitAbilityLevel(u, 'B02G') > 0 then //刃甲反伤 
            set u = CreateUnit(GetTriggerPlayer(), 'e000', 0, 0, 0) 
            if GetUnitAbilityLevel(m, 'Aloc') == 0 then 
                call UnitDamageTarget(u, m, h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
            else 
                call UnitDamageTarget(u, udg_PlayerLockToHero[g], h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
            endif 
            call UnitApplyTimedLife(u, 'BTLF', 5.00) 
        endif 
        if GetUnitAbilityLevel(u, 'BNso') > 0 then //紫怨加伤 
            call DisableTrigger(tr) 
            call UnitDamageTarget(m, u, 0.2 * h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
            call EnableTrigger(tr) 
        endif 
        if GetUnitAbilityLevel(u, 'Bshs') > 0 then //黄泉颤抖加伤 
            set i = GetUnitAbilityLevel(LoadUnitHandle(udg_Hash1, GetHandleId(gg_trg_Zhuanyishanghai), 1), 'Ashs') 
            call DisableTrigger(tr) 
            call UnitDamageTarget(m, u, (3 + i) * 0.1 * h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
            call EnableTrigger(tr) 
        endif 
        if GetUnitAbilityLevel(udg_PlayerLockToHero[g], 'B049') > 0 then //杀人书 
            call DisableTrigger(tr) 
            call UnitDamageTarget(m, u, 0.04 * h * LoadInteger(udg_Hash4, GetHandleId(udg_PlayerLockToHero[g]), 1112), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
            call EnableTrigger(tr) 
        endif 
        if GetUnitAbilityLevel(udg_PlayerLockToHero[g], 'B04F') > 0 then //灭世 
            call DisableTrigger(tr) 
            call UnitDamageTarget(m, u, 0.6 * h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
            call EnableTrigger(tr) 
        endif 
        if GetUnitAbilityLevel(m, 'Aloc') == 0 then //吸血鬼,科技枪 
            if GetUnitAbilityLevel(m, 'B04D') > 0 then 
                call SetUnitState(m, UNIT_STATE_LIFE, GetUnitState(m, UNIT_STATE_LIFE) + 0.15 * h) 
                call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", m, "chest")) 
            endif 
            set i = GetUnitAbilityLevel(m, 'A0DW') 
            if i > 0 then 
                call SetUnitState(m, UNIT_STATE_LIFE, GetUnitState(m, UNIT_STATE_LIFE) + 0.1 * h * i) 
                call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", m, "chest")) 
            endif 
        else 
            if GetUnitAbilityLevel(udg_PlayerLockToHero[g], 'B04D') > 0 then 
                call SetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE, GetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE) + 0.15 * h) 
                call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", udg_PlayerLockToHero[g], "chest")) 
            endif 
            set i = GetUnitAbilityLevel(udg_PlayerLockToHero[g], 'A0DW') 
            if i > 0 then 
                call SetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE, GetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE) + 0.1 * h * i) 
                call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", udg_PlayerLockToHero[g], "chest")) 
            endif 
        endif 
        if GetUnitAbilityLevel(udg_PlayerLockToHero[g], 'B04A') > 0 and GetUnitAbilityLevel(u, 'B04B') == 0 then //冰霜节杖 
            call UnitAddAbility(u, 'A0DH') 
            call UnitRemoveAbility(u, 'A0DH') 
            call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", u, "chest")) 
        endif 
        if h > 0 and GetOwningPlayer(m) != Player(PLAYER_NEUTRAL_AGGRESSIVE) then 
            call SaveInteger(udg_Hash3, GetHandleId(u), 9999, 10) 
        endif 
        if GetUnitAbilityLevel(u, 'B03M') > 0 then 
            call SetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE, GetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE) + 0.1 * h * LoadInteger(udg_Hash2, GetHandleId(u), 9494)) 
            call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", udg_PlayerLockToHero[g], "chest")) 
            call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", u, "chest")) 
        endif 
        set u = null 
        set m = null 
        set tr = null 
        return false 
    else 
        if n == 'n00T' and h < 2000 and h > 0 then //神圣伤害 
            if GetUnitAbilityLevel(u, 'B002') > 0 then //幽灵船减伤 
                call SetUnitState(u, UNIT_STATE_LIFE, GetUnitState(u, UNIT_STATE_LIFE) + (0.3 * h)) 
                set h = 0.7 * h 
            endif 
            if GetUnitAbilityLevel(u, 'B02G') > 0 then //刃甲反伤 
                set u = CreateUnit(GetTriggerPlayer(), 'e000', 0, 0, 0) 
                if GetUnitAbilityLevel(m, 'Aloc') == 0 then 
                    call UnitDamageTarget(u, m, h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
    else 
                    call UnitDamageTarget(u, udg_PlayerLockToHero[g], h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
                endif 
                call UnitApplyTimedLife(u, 'BTLF', 5.00) 
            endif 
            if GetUnitAbilityLevel(u, 'BNso') > 0 then //紫怨加伤 
                call DisableTrigger(tr) 
                call UnitDamageTarget(m, u, 0.2 * h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
                call EnableTrigger(tr) 
            endif 
            if GetUnitAbilityLevel(u, 'Bshs') > 0 then //黄泉颤抖加伤 
                set i = GetUnitAbilityLevel(LoadUnitHandle(udg_Hash1, GetHandleId(gg_trg_Zhuanyishanghai), 1), 'Ashs') 
                call DisableTrigger(tr) 
                call UnitDamageTarget(m, u, (3 + i) * 0.1 * h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
                call EnableTrigger(tr) 
            endif 
            if GetUnitAbilityLevel(udg_PlayerLockToHero[g], 'B049') > 0 then //杀人书 
                call DisableTrigger(tr) 
                call UnitDamageTarget(m, u, 0.04 * h * LoadInteger(udg_Hash4, GetHandleId(udg_PlayerLockToHero[g]), 1112), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
                call EnableTrigger(tr) 
            endif 
            if GetUnitAbilityLevel(udg_PlayerLockToHero[g], 'B04F') > 0 then //灭世 
                call DisableTrigger(tr) 
                call UnitDamageTarget(m, u, 0.6 * h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
                call EnableTrigger(tr) 
            endif 
            if GetUnitAbilityLevel(m, 'Aloc') == 0 then //吸血鬼,科技枪 
                if GetUnitAbilityLevel(m, 'B04D') > 0 then 
                    call SetUnitState(m, UNIT_STATE_LIFE, GetUnitState(m, UNIT_STATE_LIFE) + 0.15 * h) 
                    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", m, "chest")) 
                endif 
                set i = GetUnitAbilityLevel(m, 'A0DW') 
                if i > 0 then 
                    call SetUnitState(m, UNIT_STATE_LIFE, GetUnitState(m, UNIT_STATE_LIFE) + 0.1 * h * i) 
                    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", m, "chest")) 
                endif 
            else 
                if GetUnitAbilityLevel(udg_PlayerLockToHero[g], 'B04D') > 0 then 
                    call SetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE, GetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE) + 0.15 * h) 
                    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", udg_PlayerLockToHero[g], "chest")) 
                endif 
                set i = GetUnitAbilityLevel(udg_PlayerLockToHero[g], 'A0DW') 
                if i > 0 then 
                    call SetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE, GetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE) + 0.1 * h * i) 
                    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", udg_PlayerLockToHero[g], "chest")) 
                endif 
            endif 
            if GetUnitAbilityLevel(udg_PlayerLockToHero[g], 'B04A') > 0 and GetUnitAbilityLevel(u, 'B04B') == 0 then //冰霜节杖 
                call UnitAddAbility(u, 'A0DH') 
                call UnitRemoveAbility(u, 'A0DH') 
                call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", u, "chest")) 
            endif 
            if h > 0 and GetOwningPlayer(m) != Player(PLAYER_NEUTRAL_AGGRESSIVE) then 
                call SaveInteger(udg_Hash3, GetHandleId(u), 9999, 10) 
            endif 
            if GetUnitAbilityLevel(u, 'B03M') > 0 then 
                call SetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE, GetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE) + 0.1 * h * LoadInteger(udg_Hash2, GetHandleId(u), 9494)) 
                call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", udg_PlayerLockToHero[g], "chest")) 
                call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", u, "chest")) 
            endif 
            set u = null 
            set m = null 
            set tr = null 
            return false 
        else 
            if IsUnitAlly(m, GetTriggerPlayer()) == false and h < 2000 and h > 0 and n != 'e000' then 
                if GetUnitTypeId(m) == 'owyv' or GetUnitTypeId(m) == 'echm' then //立即杀死叠加毒单位和雷神之怒单位 
                    call KillUnit(m) 
                endif 
                if GetUnitAbilityLevel(u, 'B002') > 0 then //幽灵船减伤 
                    call SetUnitState(u, UNIT_STATE_LIFE, GetUnitState(u, UNIT_STATE_LIFE) + (0.3 * h)) 
                    set h = 0.7 * h 
                endif 
                if GetUnitAbilityLevel(u, 'B02G') > 0 then //刃甲反伤 
                    set u = CreateUnit(GetTriggerPlayer(), 'e000', 0, 0, 0) 
                    if GetUnitAbilityLevel(m, 'Aloc') == 0 then 
                        call UnitDamageTarget(u, m, h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
                    else 
                        call UnitDamageTarget(u, udg_PlayerLockToHero[g], h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
                    endif 
                    call UnitApplyTimedLife(u, 'BTLF', 5.00) 
                endif 
                if GetUnitAbilityLevel(u, 'B04C') > 0 then //荆棘反伤 
                    set u = CreateUnit(GetTriggerPlayer(), 'e000', 0, 0, 0) 
                    if GetUnitAbilityLevel(m, 'Aloc') == 0 then 
                        call UnitDamageTarget(u, m, 0.3 * h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS) 
                    else 
                        call UnitDamageTarget(u, udg_PlayerLockToHero[g], 0.3 * h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS) 
                    endif 
                    call UnitApplyTimedLife(u, 'BTLF', 5.00) 
                endif 
                if GetUnitAbilityLevel(u, 'BNso') > 0 then //紫怨加伤 
                    call DisableTrigger(tr) 
                    call UnitDamageTarget(m, u, 0.2 * h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS) 
                    call EnableTrigger(tr) 
                endif 
                if GetUnitAbilityLevel(u, 'Bshs') > 0 then //黄泉颤抖加伤 
                    set i = GetUnitAbilityLevel(LoadUnitHandle(udg_Hash1, GetHandleId(gg_trg_Zhuanyishanghai), 1), 'Ashs') 
                    call DisableTrigger(tr) 
                    call UnitDamageTarget(m, u, (3 + i) * 0.1 * h, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS) 
                    call EnableTrigger(tr) 
                endif 
                if GetUnitAbilityLevel(udg_PlayerLockToHero[g], 'B04A') > 0 and GetUnitAbilityLevel(u, 'B04B') == 0 then //冰霜节杖 
                    call UnitAddAbility(u, 'A0DH') 
                    call UnitRemoveAbility(u, 'A0DH') 
                    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", u, "chest")) 
                endif 
                if h > 0 and GetOwningPlayer(m) != Player(PLAYER_NEUTRAL_AGGRESSIVE) then //跳刀 
                    call SaveInteger(udg_Hash3, GetHandleId(u), 9999, 10) 
                endif 
                if GetUnitAbilityLevel(u, 'B03M') > 0 then //撕裂伤口 
                    call SetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE, GetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE) + 0.1 * h * LoadInteger(udg_Hash2, GetHandleId(u), 9494)) 
                    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", udg_PlayerLockToHero[g], "chest")) 
                    call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", u, "chest")) 
                endif 
                if GetUnitAbilityLevel(m, 'Aloc') == 0 then //吸血鬼 
                    if GetUnitAbilityLevel(m, 'B04D') > 0 then 
                        call SetUnitState(m, UNIT_STATE_LIFE, GetUnitState(m, UNIT_STATE_LIFE) + 0.15 * h) 
                        call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", m, "chest")) 
                    endif 
    else 
                    if GetUnitAbilityLevel(udg_PlayerLockToHero[g], 'B04D') > 0 then 
                        call SetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE, GetUnitState(udg_PlayerLockToHero[g], UNIT_STATE_LIFE) + 0.15 * h) 
                        call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", udg_PlayerLockToHero[g], "chest")) 
                    endif 
                endif 
                set u = null 
                set m = null 
                set tr = null 
                return false 
            endif 
        endif 
    endif 
    set tr = null 
    set u = null 
    set m = null 
    return false 
endfunction 


function UnitDeathAction takes nothing returns boolean 
    local unit u = GetTriggerUnit() 
    local integer i = GetHandleId(u) 
    local trigger tr1 = LoadTriggerHandle(udg_Hash5, i, 1) 
    local trigger tr2 = GetTriggeringTrigger() 
    call TriggerClearConditions(tr1) 
    call TriggerClearConditions(tr2) 
    call TriggerRemoveCondition(tr1, LoadTriggerConditionHandle(udg_Hash5, i, 2)) 
    call TriggerRemoveCondition(tr2, LoadTriggerConditionHandle(udg_Hash5, i, 3)) 
    call DestroyTrigger(tr1) 
    call DestroyTrigger(tr2) 
    call FlushChildHashtable(udg_Hash5, i) 
    set u = null 
    set tr1 = null 
    set tr2 = null 
    return false 
endfunction 
